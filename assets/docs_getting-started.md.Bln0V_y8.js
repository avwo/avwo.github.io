import{_ as e,a as s,b as a,c as o,d as n}from"./chunks/log-basic.CqKoa6eW.js";import{_ as l}from"./chunks/rules.Cxzqu120.js";import{_ as i}from"./chunks/weinre-menu.TvWk0GiX.js";import{_ as r,c,o as d,ag as p}from"./chunks/framework.Bw-5EFTY.js";const v=JSON.parse('{"title":"快速上手","description":"","frontmatter":{},"headers":[],"relativePath":"docs/getting-started.md","filePath":"docs/getting-started.md"}'),h={name:"docs/getting-started.md"};function g(m,t,w,u,b,x){return d(),c("div",null,t[0]||(t[0]=[p('<h1 id="快速上手" tabindex="-1">快速上手 <a class="header-anchor" href="#快速上手" aria-label="Permalink to &quot;快速上手&quot;">​</a></h1><p>安装完成后</p><ul><li><strong>客户端版本</strong>：直接启动桌面应用程序</li><li><strong>命令行版本</strong>：在浏览器中访问 <a href="http://local.whistlejs.com" target="_blank" rel="noreferrer">http://local.whistlejs.com</a></li></ul><p>即可进入操作界面：</p><img width="1000" alt="network" src="'+e+'"><p>操作界面主要功能：</p><ul><li><strong>Network</strong>：实时抓包分析与请求重放/编辑等界面</li><li><strong>Rules</strong>：修改请求/响应的规则配置界面</li><li><strong>Values</strong>：操作内容配置界面（支持规则变量调用）</li><li><strong>Plugins</strong>：插件管理界面</li></ul><h2 id="界面操作示例" tabindex="-1">界面操作示例 <a class="header-anchor" href="#界面操作示例" aria-label="Permalink to &quot;界面操作示例&quot;">​</a></h2><ol><li><p>重放请求</p><blockquote><p>点击请求并点击顶部 <code>Replay</code> 按钮，或请求列表右键菜单 Actions -&gt; Replay</p></blockquote><img width="720" alt="replay request" src="'+s+'"></li><li><p>编辑或构造请求</p><blockquote><p>点击请求并点击顶部 <code>Edit</code> 按钮，或请求列表右键菜单 Actions -&gt; Edit Request</p></blockquote><img width="1000" alt="edit request" src="'+a+'"></li></ol><h2 id="规则简介" tabindex="-1">规则简介 <a class="header-anchor" href="#规则简介" aria-label="Permalink to &quot;规则简介&quot;">​</a></h2><img width="1000" alt="set rules" src="'+l+`"><p>Whistle 通过配置简洁的规则，即可高效地修改与调试网络请求和响应。其所有规则都基于一个核心语法结构：</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern operation [lineProps...] [filters...]</span></span></code></pre></div><p><strong>规则解读</strong>：当一个请求的 URL 与 <code>pattern</code> 匹配时，Whistle 就会对其执行 <code>operation</code> 所定义的操作。此外，您还可以：</p><ul><li>通过可选的 <code>lineProps</code> 为当前同一行的规则设置特殊属性</li><li>通过可选的 <code>filters</code> 对已匹配的请求进行二次筛选</li></ul><table tabindex="0"><thead><tr><th>名称</th><th>功能</th></tr></thead><tbody><tr><td>pattern</td><td>匹配请求 URL 的表达式（支持域名、路径、正则、通配符）：<br>1. <code>www.test.com</code>（域名）<br>2. <code>https://www.test.com</code>（带协议域名）<br>3. <code>www.test.com:8080</code>（带端口域名）<br>4. <code>*.test.com</code>（带通配符域名）<br>5. <code>www.test.com/path</code>（路径）<br>6. <code>https://www.test.com/path</code>（带协议路径）<br>7. <code>www.test.com/path?query</code>（带参数域名）<br>8. <code>/api/i</code>（正则表达式）<br>9. <code>^**.test.com/path/index.*.js</code>（通配符）<br>10. <code>^https://**.test.com/path/index.*.js</code>（带协议通配符）</td></tr><tr><td>operation</td><td>要执行的具体操作，格式为 <code>操作协议://操作内容</code>：<br>1. <code>reqHeaders://x-proxy=whistle</code>（设置请求头）<br>2. <code>file:///User/xxx</code>（映射到本地文件）</td></tr><tr><td>lineProps</td><td>仅对当前规则生效的附加配置，用于提升规则优先级、细化匹配规则功能等行为（支持组合使用）：<br>1. <code>lineProps://important</code>（提升当行规则优先级）<br>2. <code>lineProps://safeHtml</code>（确保响应内容不是 JSON 对象）<br>3. <code>lineProps://proxyHost</code>（让 <code>proxy</code> 和 <code>host</code> 协议同时生效）</td></tr><tr><td>filters</td><td>在 pattern 匹配的基础上进行更精确的筛选（支持组合使用）：<br>1. <code>includeFilter://b:cmdname=xxx</code>（保留请求体中含 <code>cmdname=xxx</code> 的请求，不区分大小写）<br>2. <code>excludeFilter://reqH.user-agent=/android/i</code>（排除 User-Agent 包含 android 的请求，不区分大小写）</td></tr></tbody></table><p>我们先从几个常见功能开始，直观感受 Whistle 规则的基本用法，详细解读稍后说明。</p><h2 id="本地替换" tabindex="-1">本地替换 <a class="header-anchor" href="#本地替换" aria-label="Permalink to &quot;本地替换&quot;">​</a></h2><p>在开发或问题排查过程中，经常需要将页面的静态资源、接口等请求转发到本地环境或指定的测试服务器。通过 Whistle 规则，可以方便地实现这类映射与代理。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 1. 将页面请求转发到本地开发服务</span></span>
<span class="line"><span>www.example.com http://localhost:5173 excludeFilter://*/static excludeFilter://*/api</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2. 将静态资源映射到本地文件目录</span></span>
<span class="line"><span>www.example.com/static file:///User/xxx/statics</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 3. 将接口请求转发到测试环境服务器</span></span>
<span class="line"><span>www.example.com/api 10.1.0.1:8080</span></span></code></pre></div><h4 id="规则说明" tabindex="-1">规则说明 <a class="header-anchor" href="#规则说明" aria-label="Permalink to &quot;规则说明&quot;">​</a></h4><table tabindex="0"><thead><tr><th>规则</th><th>作用</th><th>注意事项</th></tr></thead><tbody><tr><td><code>www.example.com/static file:///User/xxx/statics</code></td><td>将 <code>www.example.com/static/…</code> 路径下的所有请求映射到本地的 <code>/User/xxx/statics/…</code> 目录。</td><td>若本地无对应文件，会返回 404 错误。</td></tr><tr><td><code>www.example.com/api 10.1.0.1:8080</code></td><td>将所有 <code>www.example.com/api/…</code> 的请求转发到测试服务器 <code>10.1.0.1:8080</code>。</td><td>转发后服务器收到的 URL 不变，仅主机和端口部分被替换。</td></tr><tr><td><code>www.example.com http://localhost:5173 excludeFilter://*/static excludeFilter://*/api</code></td><td>将 <code>www.example.com</code> 的其他请求（除 static 和 api 路径外）全部转发到本地服务 <code>localhost:5173</code>。</td><td>该规则会将 <strong>http 与 https</strong> 请求都转发到 <code>http://localhost:5173</code>，服务器获取到的 URL 为转发后的地址。</td></tr></tbody></table><p>根据实际开发环境调整上述规则中的域名、本地路径或测试服务器地址即可快速实现请求转发，提升开发与调试效率。</p><h2 id="修改请求-响应内容" tabindex="-1">修改请求/响应内容 <a class="header-anchor" href="#修改请求-响应内容" aria-label="Permalink to &quot;修改请求/响应内容&quot;">​</a></h2><p>在开发或调试时，将线上请求指向本地或测试环境。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 场景一：将整个站点代理到本地开发服务器（排除静态和API路径）</span></span>
<span class="line"><span>www.example.com http://localhost:5173 excludeFilter://*/static excludeFilter://*/api</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 场景二：将特定路径的静态资源映射到本地目录</span></span>
<span class="line"><span>www.example.com/static file:///User/xxx/statics</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 场景三：将 API 接口转发到测试服务器</span></span>
<span class="line"><span>www.example.com/api 10.1.0.1:8080</span></span></code></pre></div><p><strong>关键区别</strong>：</p><ul><li><code>file://</code>：将请求映射到<strong>本地文件系统</strong>，若文件不存在则返回404。</li><li><code>http://</code> 或 <code>ip:port</code>：将请求<strong>代理转发</strong>到另一台服务器，服务器看到的是原始URL。</li></ul><h2 id="远程调试-查看-dom-与日志" tabindex="-1">远程调试：查看 DOM 与日志 <a class="header-anchor" href="#远程调试-查看-dom-与日志" aria-label="Permalink to &quot;远程调试：查看 DOM 与日志&quot;">​</a></h2><p>使用内置的 <strong>weinre</strong> 和 <strong>log</strong> 协议，远程调试页面。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 同时启用远程DOM调试(weinre)和日志捕获(log)</span></span>
<span class="line"><span>https://www.qq.com weinre://test log://</span></span></code></pre></div><ol><li><strong>访问 weinre 调试器</strong>：启动规则后，将鼠标悬停在顶部菜单 <code>Weinre</code> 上，点击会话名（如 <code>myDebugSession</code>）即可打开调试界面。 <img src="`+i+'" alt="打开weinre菜单" width="360"></li><li><strong>开始调试</strong>：在浏览器中访问目标页面（如 <code>https://www.qq.com</code>），在 weinre 界面选择该页面，即可像使用浏览器开发者工具一样检查 <strong>Elements</strong>、<strong>Console</strong> 等。 <img src="'+o+'" alt="weinre主界面" width="800"></li><li><strong>查看完整日志</strong>：所有页面 Console 输出及 JavaScript 错误会同步显示在 Whistle 主控制台的 <strong>Network → 右侧 Tools → Console</strong> 标签页中。 <img src="'+n+'" alt="log功能演示"></li></ol><h2 id="详细文档" tabindex="-1">详细文档 <a class="header-anchor" href="#详细文档" aria-label="Permalink to &quot;详细文档&quot;">​</a></h2><ol><li><strong><a href="./gui/network.html">界面功能详解</a></strong>：深入了解 Network 等面板的所有功能。</li><li><strong><a href="./rules/rule.html">规则配置全集</a></strong>：查阅所有支持的规则协议和高级用法。</li></ol>',34)]))}const P=r(h,[["render",g]]);export{v as __pageData,P as default};
