import{_ as a}from"./chunks/values-demo1.CKp8x0mH.js";import{_ as s,c as n,o as t,ag as p}from"./chunks/framework.Bw-5EFTY.js";const m=JSON.parse('{"title":"operation","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/operation.md","filePath":"en/docs/rules/operation.md"}'),l={name:"en/docs/rules/operation.md"};function o(i,e,r,d,c,h){return t(),n("div",null,e[0]||(e[0]=[p('<h1 id="operation" tabindex="-1">operation <a class="header-anchor" href="#operation" aria-label="Permalink to &quot;operation&quot;">​</a></h1><p>In Whistle, each rule consists of two parts: <strong>Pattern</strong> (<code>pattern</code>) and <strong>Operation</strong> (<code>operation</code>). The general syntax for <code>operation</code> is:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>protocol://[value]</span></span></code></pre></div><ul><li><strong>protocol</strong>: Specifies the operation type (such as <code>file</code>, <code>proxy</code>, <code>resReplace</code>, etc.)</li><li><strong>value</strong>: Operation content (supports multiple formats, see below)</li></ul><h2 id="inline-values" tabindex="-1">Inline Values <a class="header-anchor" href="#inline-values" aria-label="Permalink to &quot;Inline Values&quot;">​</a></h2><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern reqHeaders://x-proxy=Whistle   # Set request headers</span></span>\n<span class="line"><span>pattern statusCode://404               # Modify status code</span></span>\n<span class="line"><span>pattern file://({&quot;ec&quot;:0})              # Respond with inline content (value inside parentheses: `{&quot;ec&quot;:0}`)</span></span></code></pre></div><p>When the operation content (Value) contains spaces, line breaks, or special characters, inline method cannot be used directly. Use the following alternative methods instead:</p><h2 id="embedded-values" tabindex="-1">Embedded Values <a class="header-anchor" href="#embedded-values" aria-label="Permalink to &quot;Embedded Values&quot;">​</a></h2><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>``` ua.txt</span></span>\n<span class="line"><span>Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1</span></span>\n<span class="line"><span>```</span></span>\n<span class="line"><span>pattern ua://{ua.txt}</span></span></code></pre></div><p>Equivalent to:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>``` headers.json</span></span>\n<span class="line"><span>user-agent: Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1</span></span>\n<span class="line"><span>```</span></span>\n<span class="line"><span>pattern reqHeaders://{headers.json}</span></span></code></pre></div><h2 id="values-references" tabindex="-1">Values References <a class="header-anchor" href="#values-references" aria-label="Permalink to &quot;Values References&quot;">​</a></h2><p>When operation values (Value) need to be shared by multiple rules, embedding them directly in rules makes them non-reusable. In such cases, these values can be stored in the Values module of the Whistle interface and referenced by key name:</p><ol><li>Create a key named <code>result.json</code> in Values and fill in the operation content</li><li>In rules, reference it via <code>{result.json}</code>, e.g.: <code>www.test.com/cgi-bin/test file://{result.json}</code></li></ol><img src="'+a+`" width="420"><h2 id="file-remote-resources" tabindex="-1">File/Remote Resources <a class="header-anchor" href="#file-remote-resources" aria-label="Permalink to &quot;File/Remote Resources&quot;">​</a></h2><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern reqHeaders:///User/xxx/filepath             # Load operation content from local file</span></span>
<span class="line"><span>pattern resHeadrs://https://example.com/config.json # Load JSON object from remote URL</span></span>
<span class="line"><span>pattern resHeaders://temp/blank.json                # Through editing temporary files</span></span></code></pre></div><blockquote><p>⚠️ Note: Protocols like http/https/ws/wss/tunnel/host/enable/cache... prohibit obtaining content via file paths or remote URLs. See each protocol&#39;s documentation for details.</p></blockquote><h2 id="temporary-files" tabindex="-1">Temporary Files <a class="header-anchor" href="#temporary-files" aria-label="Permalink to &quot;Temporary Files&quot;">​</a></h2><p>When frequent content editing is needed, you can use Whistle&#39;s temporary file functionality.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern protocol://temp.json</span></span></code></pre></div><p><strong>Operation Steps</strong>:</p><ol><li>In the Rules editor, hold <code>Command</code> (Mac) / <code>Ctrl</code> (Windows)</li><li>Click with mouse on <code>protocol://temp.json</code></li><li>Enter the response content in the pop-up editing dialog</li><li>Click <code>Save</code> to save</li></ol><h2 id="parentheses-usage" tabindex="-1">Parentheses Usage <a class="header-anchor" href="#parentheses-usage" aria-label="Permalink to &quot;Parentheses Usage&quot;">​</a></h2><p>In Whistle rules, the value part of <code>protocol://value</code> can have three types of indirect references:</p><ol><li><code>{key}</code> - Reference embedded values</li><li><code>remote-url</code> - Remote resource address</li><li><code>localfilepath</code> - Local file path</li></ol><p>When you need to directly reference the above content itself (rather than what they indirectly reference) as operation content, you can wrap it with parentheses:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>protocol://(value)</span></span></code></pre></div><p>Examples:</p><ol><li><code>reqHeaders:///User/xxx/yyy.txt</code> - Load operation content from local file <code>/User/xxx/yyy.txt</code></li><li><code>reqHeaders://(/User/xxx/yyy.txt)</code> - Treat <code>/User/xxx/yyy.txt</code> directly as operation content</li></ol><h2 id="template-strings" tabindex="-1">Template Strings <a class="header-anchor" href="#template-strings" aria-label="Permalink to &quot;Template Strings&quot;">​</a></h2><p>Whistle provides template string functionality similar to ES6, allowing you to dynamically reference request information and apply it to rule configurations. Supports the following template string types:</p><h5 id="general-inline-values" tabindex="-1">General Inline Values <a class="header-anchor" href="#general-inline-values" aria-label="Permalink to &quot;General Inline Values&quot;">​</a></h5><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern protocol://\`...\${version}...\`</span></span></code></pre></div><h5 id="embedded-values-or-values-references" tabindex="-1">Embedded Values or Values References <a class="header-anchor" href="#embedded-values-or-values-references" aria-label="Permalink to &quot;Embedded Values or Values References&quot;">​</a></h5><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` test.key</span></span>
<span class="line"><span>...\${reqId}...</span></span>
<span class="line"><span>...\${version}...</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span>pattern protocol://\`{test.key}\`</span></span></code></pre></div><h5 id="parenthesized-content" tabindex="-1">Parenthesized Content <a class="header-anchor" href="#parenthesized-content" aria-label="Permalink to &quot;Parenthesized Content&quot;">​</a></h5><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern protocol://\`(...\${now}...)\`</span></span></code></pre></div><h5 id="string-variables" tabindex="-1">String Variables <a class="header-anchor" href="#string-variables" aria-label="Permalink to &quot;String Variables&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Variable Name</th><th>Value</th></tr></thead><tbody><tr><td><code>\${now}</code></td><td>Date.now()</td></tr><tr><td><code>\${random}</code></td><td>Math.random()</td></tr><tr><td><code>\${randomUUID}</code></td><td>crypto.randomUUID()</td></tr><tr><td><code>\${randomInt(n)}</code> or <code>\${randomInt(n1-n2)}</code></td><td>Get a random positive integer from [0, n] or [n1, n2] (Added in: v2.9.104)</td></tr><tr><td><code>\${reqId}</code></td><td>ID assigned by Whistle to each request</td></tr><tr><td><code>\${url.protocol}</code></td><td>url.parse(fullUrl).protocol</td></tr><tr><td><code>\${url.hostname}</code></td><td>url.parse(fullUrl).hostname</td></tr><tr><td><code>\${url.host}</code></td><td>url.parse(fullUrl).host</td></tr><tr><td><code>\${url.port}</code></td><td>url.parse(fullUrl).port</td></tr><tr><td><code>\${url.path}</code></td><td>url.parse(fullUrl).path</td></tr><tr><td><code>\${url.pathname}</code></td><td>url.parse(fullUrl).pathname</td></tr><tr><td><code>\${url.search}</code></td><td>url.parse(fullUrl).search</td></tr><tr><td><code>\${query.xxx}</code></td><td>Value of request parameter <code>xxx</code></td></tr><tr><td><code>\${url}</code></td><td>Complete request URL</td></tr><tr><td><code>\${querystring}</code></td><td>url.parse(fullUrl).search || &#39;?&#39; (not empty)</td></tr><tr><td><code>\${searchstring}</code></td><td>url.parse(fullUrl).search || &#39;?&#39; (not empty)</td></tr><tr><td><code>\${method}</code></td><td>Request method</td></tr><tr><td><code>\${reqHeaders.xxx}</code></td><td>Value of request header field <code>xxx</code></td></tr><tr><td><code>\${resHeaders.xxx}</code></td><td>Value of response header field <code>xxx</code></td></tr><tr><td><code>\${version}</code></td><td>Whistle version number</td></tr><tr><td><code>\${port}</code></td><td>Whistle port number</td></tr><tr><td><code>\${host}</code></td><td>Network interface IP that Whistle listens on (empty by default)</td></tr><tr><td><code>\${realPort}</code></td><td>port displayed in Whistle interface&#39;s Online dialog (usually Whistle port number)</td></tr><tr><td><code>\${realHost}</code></td><td>host displayed in Whistle interface&#39;s Online dialog (usually the network interface IP that Whistle listens on)</td></tr><tr><td><code>\${clientIp}</code></td><td>Client IP</td></tr><tr><td><code>\${clientPort}</code></td><td>Client port</td></tr><tr><td><code>\${serverIp}</code></td><td>Server IP</td></tr><tr><td><code>\${serverPort}</code></td><td>Server port</td></tr><tr><td><code>\${reqCookies.xxx}</code></td><td>Value of request cookie <code>xxx</code></td></tr><tr><td><code>\${resCookies.xxx}</code></td><td>Value of response cookie <code>xxx</code></td></tr><tr><td><code>\${statusCode}</code></td><td>Response status code</td></tr><tr><td><code>\${env.xxx}</code></td><td>process.env.xxx</td></tr><tr><td><code>\${whistle.plugin-name}</code></td><td><code>value</code> of <code>whistle.plugin-name://value</code> or <code>plugin-name://value</code></td></tr></tbody></table><blockquote><p><code>\${whistle.plugin-name}</code> may only have values in internal rules of plugins</p></blockquote><h5 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h5><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` test.txt</span></span>
<span class="line"><span>now: \${now}</span></span>
<span class="line"><span>random: \${random}</span></span>
<span class="line"><span>randomUUID: \${randomUUID}</span></span>
<span class="line"><span>reqId: \${reqId}</span></span>
<span class="line"><span>url.protocol: \${url.protocol}</span></span>
<span class="line"><span>url.hostname: \${url.hostname}</span></span>
<span class="line"><span>url.host: \${url.host}</span></span>
<span class="line"><span>url.port: \${url.port}</span></span>
<span class="line"><span>url.path: \${url.path}</span></span>
<span class="line"><span>url.pathname: \${url.pathname}</span></span>
<span class="line"><span>url.search; \${url.search}</span></span>
<span class="line"><span>query: \${query.name}</span></span>
<span class="line"><span>url: \${url}</span></span>
<span class="line"><span>querystring: \${querystring}</span></span>
<span class="line"><span>searchstring: \${searchstring}</span></span>
<span class="line"><span>method: \${method}</span></span>
<span class="line"><span>reqHeaders.accept: \${reqHeaders.accept}</span></span>
<span class="line"><span>resHeaders.content-type: \${resHeaders.content-type}</span></span>
<span class="line"><span>version: \${version}</span></span>
<span class="line"><span>port: \${port}</span></span>
<span class="line"><span>host: \${host}</span></span>
<span class="line"><span>realPort: \${realPort}</span></span>
<span class="line"><span>realHost: \${realHost}</span></span>
<span class="line"><span>clientIp: \${clientIp}</span></span>
<span class="line"><span>clientPort: \${clientPort}</span></span>
<span class="line"><span>serverIp: \${serverIp}</span></span>
<span class="line"><span>serverPort: \${serverPort}</span></span>
<span class="line"><span>reqCookies.test: \${reqCookies.test}</span></span>
<span class="line"><span>resCookies.test: \${resCookies.test}</span></span>
<span class="line"><span>statusCode: \${statusCode}</span></span>
<span class="line"><span>env.USER: \${env.USER}</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>www.test.com/index.html file://\`{test.txt}\`</span></span></code></pre></div><p>Accessing <code>https://www.test.com/index.html?name=avenwu</code> returns response content:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>now: 1752301623295</span></span>
<span class="line"><span>random: 0.6819241513880432</span></span>
<span class="line"><span>randomUUID: e917b9fc-e2ef-4255-9209-11eb417235c5</span></span>
<span class="line"><span>reqId: 1752301623294-339</span></span>
<span class="line"><span>url.protocol: https:</span></span>
<span class="line"><span>url.hostname: www.test.com</span></span>
<span class="line"><span>url.host: www.test.com</span></span>
<span class="line"><span>url.port: </span></span>
<span class="line"><span>url.path: /index.html?name=avenwu</span></span>
<span class="line"><span>url.pathname: /index.html</span></span>
<span class="line"><span>url.search; ?name=avenwu</span></span>
<span class="line"><span>query: avenwu</span></span>
<span class="line"><span>url: https://www.test.com/index.html?name=avenwu</span></span>
<span class="line"><span>querystring: ?name=avenwu</span></span>
<span class="line"><span>searchstring: ?name=avenwu</span></span>
<span class="line"><span>method: GET</span></span>
<span class="line"><span>reqHeaders.accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span></span>
<span class="line"><span>resHeaders.content-type: </span></span>
<span class="line"><span>version: 2.9.100</span></span>
<span class="line"><span>port: 8899</span></span>
<span class="line"><span>host: </span></span>
<span class="line"><span>realPort: 8899</span></span>
<span class="line"><span>realHost: </span></span>
<span class="line"><span>clientIp: 127.0.0.1</span></span>
<span class="line"><span>clientPort: 60582</span></span>
<span class="line"><span>serverIp: </span></span>
<span class="line"><span>serverPort: </span></span>
<span class="line"><span>reqCookies.test: </span></span>
<span class="line"><span>resCookies.test: </span></span>
<span class="line"><span>statusCode: </span></span>
<span class="line"><span>env.USER: av</span></span></code></pre></div><h2 id="data-objects" tabindex="-1">Data Objects <a class="header-anchor" href="#data-objects" aria-label="Permalink to &quot;Data Objects&quot;">​</a></h2><p>Operation content can be not only text or binary content but also JSON objects. Whistle supports the following 3 data object formats:</p><h4 id="json-format" tabindex="-1">JSON Format <a class="header-anchor" href="#json-format" aria-label="Permalink to &quot;JSON Format&quot;">​</a></h4><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;key1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: value1,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;key2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: value2,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;keyN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: valueN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="line-format" tabindex="-1">Line Format <a class="header-anchor" href="#line-format" aria-label="Permalink to &quot;Line Format&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>key1: value1</span></span>
<span class="line"><span>key2:value2</span></span>
<span class="line"><span>keyN: valueN</span></span></code></pre></div><blockquote><p>Separated by <code>colon + space</code>. If there&#39;s no <code>colon + space</code>, then separated by the first colon. If there&#39;s no colon, then <code>value</code> is an empty string</p></blockquote><p><strong>Multi-level nesting:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>a.b.c: 123</span></span>
<span class="line"><span>c\\.d\\.e: abc</span></span></code></pre></div><p>Equivalent to:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;c.d.e&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="inline-format-request-parameter-format" tabindex="-1">Inline Format (Request Parameter Format) <a class="header-anchor" href="#inline-format-request-parameter-format" aria-label="Permalink to &quot;Inline Format (Request Parameter Format)&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>key1=value1&amp;key2=value2&amp;keyN=valueN</span></span></code></pre></div><blockquote><p>Both <code>key</code> and <code>value</code> should ideally be <code>encodeURIComponent</code></p></blockquote><h2 id="operation-manual" tabindex="-1">Quick Reference Manual for Common Operation Commands <a class="header-anchor" href="#operation-manual" aria-label="Permalink to &quot;Quick Reference Manual for Common Operation Commands {#operation-manual}&quot;">​</a></h2><ul><li><a href="#request">Modifying Request Content</a><ul><li><a href="#method">Modifying Request Method</a></li><li><a href="#url">Modifying Request URL</a></li><li><a href="#http-version">Modifying HTTP Version</a></li><li><a href="#req-headers">Modifying Request Headers</a></li><li><a href="#req-body">Modifying Request Body</a></li></ul></li><li><a href="#response">Modifying Response Content</a><ul><li><a href="#status-code">Modifying Status Code</a></li><li><a href="#res-headers">Modifying Response Headers</a></li><li><a href="#res-body">Modifying Response Body</a></li><li><a href="#trailers">Modifying Trailers</a></li></ul></li><li><a href="#connect">Modifying Connection Process</a><ul><li><a href="#dns">Modifying DNS</a></li><li><a href="#proxy">Setting Proxy</a></li><li><a href="#proxy-host">Proxy and DNS Taking Effect Simultaneously</a></li></ul></li><li><a href="#tools">Page Debugging Tools</a><ul><li><a href="#weinre">Viewing Page DOM Structure</a></li><li><a href="#log">Viewing Page Logs and Error Information</a></li></ul></li></ul><hr><h2 id="request" tabindex="-1">1. Modifying Request Content <a class="header-anchor" href="#request" aria-label="Permalink to &quot;1. Modifying Request Content {#request}&quot;">​</a></h2><h3 id="method" tabindex="-1">1.1 Modifying Request Method <a class="header-anchor" href="#method" aria-label="Permalink to &quot;1.1 Modifying Request Method {#method}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Basic Syntax</span></span>
<span class="line"><span>pattern method://NewMethod</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example</span></span>
<span class="line"><span>www.example.com/path method://post</span></span></code></pre></div><p><strong>Supported Data Sources:</strong></p><ul><li>Direct specification: <code>method://get</code></li><li>Embedded value: <code>method://{keyOfEmbedded}</code></li><li>Values configuration: <code>method://{keyOfValues}</code></li></ul><p><strong>Notes:</strong></p><ul><li>Method names are case-insensitive.</li><li>Not supported from local files or remote URLs.</li></ul><p><strong>Practical Examples:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Example 1: Change all request methods to POST</span></span>
<span class="line"><span>www.example.com/path method://post</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example 2: Change only PUT requests to POST</span></span>
<span class="line"><span>www.example.com/path method://post includeFilter://m:put</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example 3: Modify method based on request body content</span></span>
<span class="line"><span>www.example.com/api method://put includeFilter://b:cmdname=test</span></span></code></pre></div><h3 id="url" tabindex="-1">1.2 Modifying Request URL <a class="header-anchor" href="#url" aria-label="Permalink to &quot;1.2 Modifying Request URL {#url}&quot;">​</a></h3><h4 id="url-mapping" tabindex="-1">URL Mapping <a class="header-anchor" href="#url-mapping" aria-label="Permalink to &quot;URL Mapping&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/path/to www.test.com/test</span></span></code></pre></div><p><strong>Mapping Effect:</strong></p><ul><li><code>https://www.example.com/path/to?query=abc</code> → <code>https://www.test.com/test?query=abc</code></li><li><code>https://www.example.com/path/to/subpage</code> → <code>https://www.test.com/test/subpage</code></li><li><code>wss://www.example.com/path/to/api</code> → <code>wss://www.test.com/test/api</code></li></ul><h4 id="modifying-request-parameters" tabindex="-1">Modifying Request Parameters <a class="header-anchor" href="#modifying-request-parameters" aria-label="Permalink to &quot;Modifying Request Parameters&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Add/Replace parameters</span></span>
<span class="line"><span>pattern urlParams://({&quot;key&quot;:&quot;value&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Delete parameter</span></span>
<span class="line"><span>pattern delete://urlParams.paramName</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example: Modify parameters and delete a specific parameter</span></span>
<span class="line"><span>www.example.com/api urlParams://({&quot;cmdname&quot;:&quot;Test&quot;}) delete://urlParams.oldParam</span></span></code></pre></div><h4 id="modifying-path" tabindex="-1">Modifying Path <a class="header-anchor" href="#modifying-path" aria-label="Permalink to &quot;Modifying Path&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Regular expression replacement</span></span>
<span class="line"><span>pattern pathReplace://({&quot;/old/ig&quot;:&quot;new&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Keyword replacement</span></span>
<span class="line"><span>pattern pathReplace://({&quot;old&quot;:&quot;new&quot;})</span></span></code></pre></div><p><strong>Supported Data Sources:</strong></p><ul><li>Inline JSON</li><li>Embedded value</li><li>Values configuration</li><li>Local file</li><li>Remote URL</li></ul><h3 id="http-version" tabindex="-1">1.3 Modifying HTTP Version <a class="header-anchor" href="#http-version" aria-label="Permalink to &quot;1.3 Modifying HTTP Version {#http-version}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Force using standard HTTPS (disable HTTP/2)</span></span>
<span class="line"><span>pattern disable://h2</span></span></code></pre></div><blockquote><p>By default, attempts to establish a connection using HTTP/2; automatically downgrades to HTTPS if not supported.</p></blockquote><h3 id="req-headers" tabindex="-1">1.4 Modifying Request Headers <a class="header-anchor" href="#req-headers" aria-label="Permalink to &quot;1.4 Modifying Request Headers {#req-headers}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Add/Replace request header</span></span>
<span class="line"><span>pattern reqHeaders://({&quot;Header-Name&quot;:&quot;value&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Delete request header</span></span>
<span class="line"><span>pattern delete://reqHeaders.headerName</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example</span></span>
<span class="line"><span>www.example.com reqHeaders://({&quot;X-Custom-Header&quot;:&quot;test&quot;})</span></span></code></pre></div><h3 id="req-body" tabindex="-1">1.5 Modifying Request Body <a class="header-anchor" href="#req-body" aria-label="Permalink to &quot;1.5 Modifying Request Body {#req-body}&quot;">​</a></h3><h4 id="merge-modification-json-form" tabindex="-1">Merge Modification (JSON/Form) <a class="header-anchor" href="#merge-modification-json-form" aria-label="Permalink to &quot;Merge Modification (JSON/Form)&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern reqMerge://({&quot;newField&quot;:&quot;value&quot;})</span></span></code></pre></div><h4 id="text-replacement" tabindex="-1">Text Replacement <a class="header-anchor" href="#text-replacement" aria-label="Permalink to &quot;Text Replacement&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Regular expression replacement</span></span>
<span class="line"><span>pattern reqReplace://({&quot;/search/ig&quot;:&quot;replace&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Keyword replacement</span></span>
<span class="line"><span>pattern reqReplace://({&quot;search&quot;:&quot;replace&quot;})</span></span></code></pre></div><h4 id="complete-replacement" tabindex="-1">Complete Replacement <a class="header-anchor" href="#complete-replacement" aria-label="Permalink to &quot;Complete Replacement&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern reqBody://(NewContent)</span></span></code></pre></div><h4 id="deletion-operations" tabindex="-1">Deletion Operations <a class="header-anchor" href="#deletion-operations" aria-label="Permalink to &quot;Deletion Operations&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Delete specific field</span></span>
<span class="line"><span>pattern delete://reqBody.fieldName</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Delete entire request body</span></span>
<span class="line"><span>pattern delete://reqBody</span></span></code></pre></div><p><strong>Supported Data Sources:</strong></p><ul><li>Inline value</li><li>Embedded value</li><li>Values configuration</li><li>Local file</li><li>Remote URL</li></ul><hr><h2 id="response" tabindex="-1">2. Modifying Response Content <a class="header-anchor" href="#response" aria-label="Permalink to &quot;2. Modifying Response Content {#response}&quot;">​</a></h2><h3 id="status-code" tabindex="-1">2.1 Modifying Status Code <a class="header-anchor" href="#status-code" aria-label="Permalink to &quot;2.1 Modifying Status Code {#status-code}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace existing response status code (request reaches server)</span></span>
<span class="line"><span>pattern replaceStatus://500</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Respond directly with status code (request not sent to server)</span></span>
<span class="line"><span>pattern statusCode://500</span></span></code></pre></div><h3 id="res-headers" tabindex="-1">2.2 Modifying Response Headers <a class="header-anchor" href="#res-headers" aria-label="Permalink to &quot;2.2 Modifying Response Headers {#res-headers}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Add/Replace response header</span></span>
<span class="line"><span>pattern resHeaders://({&quot;Header-Name&quot;:&quot;value&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Delete response header</span></span>
<span class="line"><span>pattern delete://resHeaders.headerName</span></span></code></pre></div><h3 id="res-body" tabindex="-1">2.3 Modifying Response Body <a class="header-anchor" href="#res-body" aria-label="Permalink to &quot;2.3 Modifying Response Body {#res-body}&quot;">​</a></h3><h4 id="merge-modification-json-jsonp" tabindex="-1">Merge Modification (JSON/JSONP) <a class="header-anchor" href="#merge-modification-json-jsonp" aria-label="Permalink to &quot;Merge Modification (JSON/JSONP)&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resMerge://({&quot;newData&quot;:&quot;value&quot;})</span></span></code></pre></div><h4 id="text-replacement-1" tabindex="-1">Text Replacement <a class="header-anchor" href="#text-replacement-1" aria-label="Permalink to &quot;Text Replacement&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resReplace://({&quot;/old/ig&quot;:&quot;new&quot;})</span></span></code></pre></div><h4 id="replace-response-body" tabindex="-1">Replace Response Body <a class="header-anchor" href="#replace-response-body" aria-label="Permalink to &quot;Replace Response Body&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace content returned by server</span></span>
<span class="line"><span>pattern resBody://(NewContent)</span></span></code></pre></div><h4 id="respond-directly-with-content" tabindex="-1">Respond Directly with Content <a class="header-anchor" href="#respond-directly-with-content" aria-label="Permalink to &quot;Respond Directly with Content&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Request not sent to server</span></span>
<span class="line"><span>pattern file://(Content to return directly) resType://html</span></span></code></pre></div><h4 id="deletion-operations-1" tabindex="-1">Deletion Operations <a class="header-anchor" href="#deletion-operations-1" aria-label="Permalink to &quot;Deletion Operations&quot;">​</a></h4><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Delete response body field</span></span>
<span class="line"><span>pattern delete://resBody.fieldName</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Clear response body</span></span>
<span class="line"><span>pattern delete://resBody</span></span></code></pre></div><h3 id="trailers" tabindex="-1">2.4 Modifying Trailers <a class="header-anchor" href="#trailers" aria-label="Permalink to &quot;2.4 Modifying Trailers {#trailers}&quot;">​</a></h3><blockquote><p>Trailers are additional header fields sent after the chunked transfer response.</p></blockquote><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Add/Replace Trailers</span></span>
<span class="line"><span>pattern trailers://({&quot;Trailer-Name&quot;:&quot;value&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Delete Trailers</span></span>
<span class="line"><span>pattern delete://trailers.trailerName</span></span></code></pre></div><hr><h2 id="connect" tabindex="-1">3. Modifying Connection Process <a class="header-anchor" href="#connect" aria-label="Permalink to &quot;3. Modifying Connection Process {#connect}&quot;">​</a></h2><h3 id="dns" tabindex="-1">3.1 Modifying DNS <a class="header-anchor" href="#dns" aria-label="Permalink to &quot;3.1 Modifying DNS {#dns}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Set IP address</span></span>
<span class="line"><span>pattern 127.0.0.1</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Set IP and port</span></span>
<span class="line"><span>pattern 127.0.0.1:8080</span></span>
<span class="line"><span></span></span>
<span class="line"><span># CNAME effect (pointing to another host)</span></span>
<span class="line"><span>pattern host://www.target.com:8080</span></span></code></pre></div><h3 id="proxy" tabindex="-1">3.2 Setting Proxy <a class="header-anchor" href="#proxy" aria-label="Permalink to &quot;3.2 Setting Proxy {#proxy}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># HTTP proxy</span></span>
<span class="line"><span>pattern proxy://127.0.0.1:8080</span></span>
<span class="line"><span></span></span>
<span class="line"><span># SOCKS5 proxy</span></span>
<span class="line"><span>pattern socks://127.0.0.1:1080</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Supports domain name</span></span>
<span class="line"><span>pattern proxy://proxy.example.com:8080</span></span></code></pre></div><h3 id="proxy-host" tabindex="-1">3.3 Proxy and DNS Taking Effect Simultaneously <a class="header-anchor" href="#proxy-host" aria-label="Permalink to &quot;3.3 Proxy and DNS Taking Effect Simultaneously {#proxy-host}&quot;">​</a></h3><p><strong>Priority Description:</strong></p><ul><li>Default: Host configuration takes precedence over proxy.</li><li>Adjustable: Use <code>lineProps://proxyHost</code> to make both take effect simultaneously.</li></ul><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Example 1: Only host configuration takes effect</span></span>
<span class="line"><span>pattern 127.0.0.1:8080 socks://10.1.1.1:1080</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example 2: Only proxy configuration takes effect</span></span>
<span class="line"><span>pattern 127.0.0.1:8080 socks://10.1.1.1:1080 ignore://host</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Example 3: Both host and proxy take effect</span></span>
<span class="line"><span>pattern 127.0.0.1:8080 socks://10.1.1.1:1080 lineProps://proxyHost</span></span></code></pre></div><hr><h2 id="tools" tabindex="-1">4. Page Debugging Tools <a class="header-anchor" href="#tools" aria-label="Permalink to &quot;4. Page Debugging Tools {#tools}&quot;">​</a></h2><h3 id="weinre" tabindex="-1">4.1 Viewing Page DOM Structure <a class="header-anchor" href="#weinre" aria-label="Permalink to &quot;4.1 Viewing Page DOM Structure {#weinre}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern weinre://DebugSessionName</span></span></code></pre></div><blockquote><p>Detailed usage reference: <a href="./weinre.html">weinre documentation</a></p></blockquote><h3 id="log" tabindex="-1">4.2 Viewing Page Logs and Error Information <a class="header-anchor" href="#log" aria-label="Permalink to &quot;4.2 Viewing Page Logs and Error Information {#log}&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern log://LogSessionName</span></span></code></pre></div><blockquote><p>Detailed usage reference: <a href="./log.html">log documentation</a></p></blockquote><hr><h2 id="data-source-quick-reference-table" tabindex="-1">Data Source Quick Reference Table <a class="header-anchor" href="#data-source-quick-reference-table" aria-label="Permalink to &quot;Data Source Quick Reference Table&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Operation Type</th><th>Direct Inline</th><th>Embedded Value</th><th>Values</th><th>Local File</th><th>Remote URL</th></tr></thead><tbody><tr><td>Request Method</td><td>✓</td><td>✓</td><td>✓</td><td>✗</td><td>✗</td></tr><tr><td>URL Parameters</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Request Headers</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Request Body</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Response Headers</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Response Body</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Trailers</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr></tbody></table><p><strong>Syntax Examples:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Direct inline</span></span>
<span class="line"><span>protocol://({&quot;key&quot;:&quot;value&quot;})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Embedded value</span></span>
<span class="line"><span>protocol://{embeddedKey}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Values configuration</span></span>
<span class="line"><span>protocol://{valuesKey}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Local file</span></span>
<span class="line"><span>protocol:///path/to/file.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Remote URL</span></span>
<span class="line"><span>protocol://https://example.com/data.json</span></span></code></pre></div><hr><h2 id="common-filter-conditions" tabindex="-1">Common Filter Conditions <a class="header-anchor" href="#common-filter-conditions" aria-label="Permalink to &quot;Common Filter Conditions&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Filter</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>includeFilter://m:Method</code></td><td>Filter by request method</td><td><code>includeFilter://m:put</code></td></tr><tr><td><code>includeFilter://b:Content</code></td><td>Filter by request body content</td><td><code>includeFilter://b:cmdname=test</code></td></tr><tr><td>Regular Expression</td><td>Case-sensitive matching</td><td><code>/Test/</code></td></tr></tbody></table><blockquote><p><strong>Tip:</strong> For more protocols and advanced usage, refer to the <a href="./protocols.html">Complete Protocol List</a>.</p></blockquote>`,145)]))}const b=s(l,[["render",o]]);export{m as __pageData,b as default};
