import{_ as o,c as t,o as l,ag as i}from"./chunks/framework.Bw-5EFTY.js";const h=JSON.parse('{"title":"Rule Syntax","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/rule.md","filePath":"en/docs/rules/rule.md"}'),a={name:"en/docs/rules/rule.md"};function r(s,e,c,n,d,p){return l(),t("div",null,e[0]||(e[0]=[i('<h1 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h1><p>Whistle modifies requests and responses through simple rule configurations. The basic syntax structure is as follows:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern operation [includeFilter://pattern1 ... excludeFilter://patternN ...]</span></span></code></pre></div><h2 id="rule-composition" tabindex="-1">Rule Composition <a class="header-anchor" href="#rule-composition" aria-label="Permalink to &quot;Rule Composition&quot;">​</a></h2><p>Each rule consists of three core components:</p><ol><li><p><strong>Match Pattern</strong> (<code>pattern</code>): An expression to match request URLs, supporting various formats:</p><ul><li>Domain matching: <code>www.test.com</code> (matches all requests to this domain, including ports)</li><li>Path matching: <code>www.test.com/path</code></li><li>Regular expression: <code>/^https?://test\\.com//i</code></li><li>Wildcards: <code>*.test.com</code>, <code>**.test.com/path</code></li></ul><blockquote><p>Whistle supports three URL types:</p><ol><li><strong>Tunnel Proxy:</strong> <code>tunnel://domain[:port]</code></li><li><strong>WebSocket:</strong> <code>ws[s]://domain[:port]/path/to</code></li><li><strong>Regular HTTP/HTTPS:</strong> <code>http[s]://domain[:port]/path/to</code></li></ol></blockquote></li><li><p><strong>Operation</strong> (<code>operation</code>), formatted as: <code>protocol://value</code></p><ul><li><code>protocol</code>: Operation type, such as: <ul><li><code>reqHeaders</code>: Modify request headers</li><li><code>resHeaders</code>: Modify response headers</li></ul></li><li><code>value</code>: Operation content, supporting multiple data sources: <ul><li>Inline value: <code>reqHeaders://x-proxy-by=whistle</code> (directly adds a request header)</li><li>Local file: <code>file://path/to/file</code></li><li>Remote resource: <code>https://example.com/data.json</code></li><li>Preset variable: <code>{key}</code> (read from embedded values in Rules or Values)</li></ul></li></ul><blockquote><p>The <code>protocol://</code> in <strong>operation</strong> can be omitted in the following two scenarios:</p><ul><li><code>ip</code> or <code>ip:port</code>: Equivalent to <code>host://ip</code> or <code>host://ip:port</code></li><li><code>D:\\path\\to</code>, <code>/path/to</code>, or <code>{key}</code>: Equivalent to <code>file://D:\\path\\to</code>, <code>file:///path/to</code>, or <code>file://{key}</code></li></ul></blockquote></li><li><p><strong>Filter Conditions (Optional)</strong> (<code>includeFilter/excludeFilter</code>)</p><ul><li>Logical relationship: Multiple conditions use &quot;OR&quot; matching; matching any one condition makes it effective</li><li>Matching scope: <ul><li>Request: URL, method (GET/POST, etc.), header fields, content, client IP</li><li>Response: Status code, header fields, content, server IP</li></ul></li></ul></li></ol><h2 id="learn-more" tabindex="-1">Learn More <a class="header-anchor" href="#learn-more" aria-label="Permalink to &quot;Learn More&quot;">​</a></h2><ol><li>Match Pattern (expressions for matching request URLs) details: <a href="./pattern.html">Pattern</a></li><li>Operation details: <a href="./operation.html">Operation</a></li><li>Filter details: <a href="./filters.html">Filters</a></li></ol>',8)]))}const m=o(a,[["render",r]]);export{h as __pageData,m as default};
