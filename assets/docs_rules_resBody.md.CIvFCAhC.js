import{_ as e,c as s,o as t,ag as n}from"./chunks/framework.Bw-5EFTY.js";const u=JSON.parse('{"title":"resBody","description":"","frontmatter":{},"headers":[],"relativePath":"docs/rules/resBody.md","filePath":"docs/rules/resBody.md"}'),l={name:"docs/rules/resBody.md"};function o(i,a,p,r,d,c){return t(),s("div",null,a[0]||(a[0]=[n(`<h1 id="resbody" tabindex="-1">resBody <a class="header-anchor" href="#resbody" aria-label="Permalink to &quot;resBody&quot;">​</a></h1><p><code>resBody</code> 协议用于替换指定请求的响应内容体，仅对包含响应内容体的状态码（如 <code>200</code>、<code>500</code> 等）有效。</p><blockquote><p><strong>生效条件</strong>：仅对有响应内容体的状态码生效 ⚠️ 注意：<code>204</code>、<code>304</code> 等无响应内容体的请求不受影响</p></blockquote><h2 id="规则语法" tabindex="-1">规则语法 <a class="header-anchor" href="#规则语法" aria-label="Permalink to &quot;规则语法&quot;">​</a></h2><p><code>resBody</code> 支持多种方式指定要替换的响应内容：</p><h3 id="_1-内联值-直接指定" tabindex="-1">1. 内联值（直接指定） <a class="header-anchor" href="#_1-内联值-直接指定" aria-label="Permalink to &quot;1. 内联值（直接指定）&quot;">​</a></h3><p>直接在规则中写明要替换的内容，适用于简短的文本内容。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://(value) [lineProps...] [filters...]</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/api/data resBody://({&quot;status&quot;:&quot;modified&quot;})</span></span></code></pre></div><h3 id="_2-内嵌值-使用代码块" tabindex="-1">2. 内嵌值（使用代码块） <a class="header-anchor" href="#_2-内嵌值-使用代码块" aria-label="Permalink to &quot;2. 内嵌值（使用代码块）&quot;">​</a></h3><p>当需要处理包含空格、换行符的复杂内容，或希望复用某段配置时，推荐使用此方式。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://{custom-key.json} [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` custom-key.json</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;status&quot;: &quot;success&quot;,</span></span>
<span class="line"><span>  &quot;data&quot;: {</span></span>
<span class="line"><span>    &quot;message&quot;: &quot;This response was modified by resBody&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="_3-引用-values-中的值" tabindex="-1">3. 引用 Values 中的值 <a class="header-anchor" href="#_3-引用-values-中的值" aria-label="Permalink to &quot;3. 引用 Values 中的值&quot;">​</a></h3><p>当内容较大时，可以将其存储在 <code>Values</code> 配置区中。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://{key-of-values.html} [lineProps...] [filters...]</span></span></code></pre></div><p><strong>前提</strong>：在 <code>Values</code> 中存在名为 <code>key-of-values.html</code> 的键，其值为要替换的内容。</p><h3 id="_4-从文件路径或远程-url-加载" tabindex="-1">4. 从文件路径或远程 URL 加载 <a class="header-anchor" href="#_4-从文件路径或远程-url-加载" aria-label="Permalink to &quot;4. 从文件路径或远程 URL 加载&quot;">​</a></h3><p>从本地文件或远程 URL 加载要替换的响应内容。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 从本地文件加载</span></span>
<span class="line"><span>pattern resBody:///User/xxx/test.txt</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 从远程 URL 加载</span></span>
<span class="line"><span>pattern resBody://https://www.example.com/override-content.txt</span></span></code></pre></div><h3 id="_5-从临时文件中加载" tabindex="-1">5. 从临时文件中加载 <a class="header-anchor" href="#_5-从临时文件中加载" aria-label="Permalink to &quot;5. 从临时文件中加载&quot;">​</a></h3><p>当需要频繁编辑内容时，可以使用 Whistle 提供的临时文件功能。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://temp/blank.txt</span></span></code></pre></div><p><strong>操作步骤</strong>：</p><ol><li>在 Rules 编辑器中，按住 <code>Command</code>（Mac）/ <code>Ctrl</code>（Windows）</li><li>鼠标点击 <code>resBody://temp/blank.txt</code></li><li>在弹出的编辑对话框中输入替换内容</li><li>点击 <code>Save</code> 保存</li></ol><h2 id="参数详解" tabindex="-1">参数详解 <a class="header-anchor" href="#参数详解" aria-label="Permalink to &quot;参数详解&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">是否必填</th><th style="text-align:left;">描述与示例</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">是</td><td style="text-align:left;">用于匹配请求 URL 的表达式。<br>• 支持域名、路径、通配符、正则表达式。<br>• 详见 <a href="./pattern.html">匹配模式文档</a>。</td></tr><tr><td style="text-align:left;"><strong>value</strong></td><td style="text-align:left;">是</td><td style="text-align:left;">要替换的响应内容，支持多种格式：<br>• 本地文件路径<br>• 远程 URL<br>• 内联、内嵌、Values 引用内容</td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">否</td><td style="text-align:left;">为规则设置附加属性。<br>• 例如：<code>lineProps://important</code> 可提升此规则的优先级。<br>• 详见 <a href="./lineProps.html">lineProps 文档</a>。</td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">否</td><td style="text-align:left;">可选的过滤条件，用于精确控制规则生效的场景。<br>• 可匹配请求的 URL、方法、头部、体内容。<br>• 可匹配响应的状态码、头部。<br>• 详见 <a href="./filters.html">过滤器文档</a>。</td></tr></tbody></table><h2 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h2><h3 id="基础示例" tabindex="-1">基础示例 <a class="header-anchor" href="#基础示例" aria-label="Permalink to &quot;基础示例&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 替换 API 响应内容</span></span>
<span class="line"><span>www.example.com/api/data resBody://({&quot;status&quot;:&quot;custom&quot;,&quot;data&quot;:&quot;modifiedContent&quot;})</span></span></code></pre></div><h3 id="使用内嵌值" tabindex="-1">使用内嵌值 <a class="header-anchor" href="#使用内嵌值" aria-label="Permalink to &quot;使用内嵌值&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` error-response</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;error&quot;: {</span></span>
<span class="line"><span>    &quot;code&quot;: 1001,</span></span>
<span class="line"><span>    &quot;message&quot;: &quot;Custom error message for testing&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>www.example.com/api resBody://{error-response} includeFilter://s:500</span></span></code></pre></div><h3 id="从文件加载" tabindex="-1">从文件加载 <a class="header-anchor" href="#从文件加载" aria-label="Permalink to &quot;从文件加载&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 从本地文件加载替换内容</span></span>
<span class="line"><span>www.example.com/api/config resBody:///Users/username/mock/config.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 从远程 URL 加载替换内容</span></span>
<span class="line"><span>www.example.com/api/data resBody://https://raw.githubusercontent.com/user/repo/main/mock-data.json</span></span></code></pre></div><h3 id="使用临时文件" tabindex="-1">使用临时文件 <a class="header-anchor" href="#使用临时文件" aria-label="Permalink to &quot;使用临时文件&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/api/user resBody://temp/blank.json</span></span></code></pre></div><blockquote><p>在 Rules 编辑器中，按住 <code>Command</code>（Mac）/ <code>Ctrl</code>（Windows）并用鼠标点击 <code>resBody://temp/blank.json</code> 进行编辑</p></blockquote><h3 id="配合过滤器使用" tabindex="-1">配合过滤器使用 <a class="header-anchor" href="#配合过滤器使用" aria-label="Permalink to &quot;配合过滤器使用&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 仅替换特定状态码的响应</span></span>
<span class="line"><span>www.example.com/api resBody://({&quot;error&quot;:&quot;ServiceUnavailable&quot;}) includeFilter://s:503</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 根据请求方法决定替换内容</span></span>
<span class="line"><span>www.example.com/api/users resBody://({&quot;method&quot;:&quot;GEToverride&quot;}) includeFilter://m:GET</span></span>
<span class="line"><span>www.example.com/api/users resBody://({&quot;method&quot;:&quot;POSToverride&quot;}) includeFilter://m:POST</span></span></code></pre></div><h2 id="高级用法" tabindex="-1">高级用法 <a class="header-anchor" href="#高级用法" aria-label="Permalink to &quot;高级用法&quot;">​</a></h2><h3 id="动态内容替换" tabindex="-1">动态内容替换 <a class="header-anchor" href="#动态内容替换" aria-label="Permalink to &quot;动态内容替换&quot;">​</a></h3><p>使用正则表达式进行动态内容构造：</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 将原始响应中的时间戳替换为当前时间</span></span>
<span class="line"><span>www.example.com/api/time resBody://\`({&quot;timestamp&quot;:\${now}})\`</span></span></code></pre></div><h3 id="环境特定替换" tabindex="-1">环境特定替换 <a class="header-anchor" href="#环境特定替换" aria-label="Permalink to &quot;环境特定替换&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 开发环境：使用模拟数据</span></span>
<span class="line"><span>dev-api.example.com resBody://{&quot;env&quot;:&quot;development&quot;,&quot;data&quot;:&quot;mock&quot;}</span></span></code></pre></div><h3 id="错误场景测试" tabindex="-1">错误场景测试 <a class="header-anchor" href="#错误场景测试" aria-label="Permalink to &quot;错误场景测试&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 模拟各种错误响应</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;RateLimitExceeded&quot;} includeFilter://s:429</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;InternalServerError&quot;} includeFilter://s:500</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;ServiceUnavailable&quot;} includeFilter://s:503</span></span></code></pre></div><h2 id="与-file-协议的区别" tabindex="-1">与 file 协议的区别 <a class="header-anchor" href="#与-file-协议的区别" aria-label="Permalink to &quot;与 file 协议的区别&quot;">​</a></h2><p><code>resBody</code> 协议与 <a href="./file.html"><code>file</code></a> 协议的主要区别在于请求处理流程：</p><h3 id="处理流程对比" tabindex="-1">处理流程对比 <a class="header-anchor" href="#处理流程对比" aria-label="Permalink to &quot;处理流程对比&quot;">​</a></h3><ul><li><strong><code>resBody</code> 协议</strong>：请求<strong>先发送到后台服务器</strong>获取原始响应，然后用指定内容<strong>替换</strong>原始响应体</li><li><strong><code>file</code> 协议</strong>：请求<strong>不会发送到后台服务器</strong>，直接返回指定的文件内容</li></ul><h3 id="使用场景对比" tabindex="-1">使用场景对比 <a class="header-anchor" href="#使用场景对比" aria-label="Permalink to &quot;使用场景对比&quot;">​</a></h3><ul><li><strong><code>resBody</code></strong>：适用于修改真实接口的返回内容，保持请求-响应的完整流程</li><li><strong><code>file</code></strong>：适用于完全本地模拟，不依赖真实后端服务</li></ul><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><h3 id="响应类型保持" tabindex="-1">响应类型保持 <a class="header-anchor" href="#响应类型保持" aria-label="Permalink to &quot;响应类型保持&quot;">​</a></h3><ul><li><code>resBody</code> 替换的是响应体内容，不会自动修改 <code>Content-Type</code> 响应头</li><li>如果需要修改响应类型，请配合使用 <a href="./resType.html"><code>resType</code></a> 协议</li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="q-resbody-规则没有生效" tabindex="-1">Q: resBody 规则没有生效 <a class="header-anchor" href="#q-resbody-规则没有生效" aria-label="Permalink to &quot;Q: resBody 规则没有生效&quot;">​</a></h3><p><strong>A:</strong> 检查：</p><ol><li>响应状态码是否有响应体（排除 204、304 等）</li><li>规则 pattern 是否正确匹配请求 URL</li><li>过滤器条件是否满足</li><li>是否有更高优先级的规则覆盖</li></ol><h3 id="q-能否仅替换特定类型的响应" tabindex="-1">Q: 能否仅替换特定类型的响应 <a class="header-anchor" href="#q-能否仅替换特定类型的响应" aria-label="Permalink to &quot;Q: 能否仅替换特定类型的响应&quot;">​</a></h3><p><strong>A:</strong> 可以，使用过滤器：</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 仅替换 JSON 响应</span></span>
<span class="line"><span>pattern resBody://content includeFilter://resH:content-type=json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 仅替换特定路径的响应</span></span>
<span class="line"><span>pattern resBody://content includeFilter://*/api/v1/</span></span></code></pre></div><h2 id="关联协议" tabindex="-1">关联协议 <a class="header-anchor" href="#关联协议" aria-label="Permalink to &quot;关联协议&quot;">​</a></h2><ol><li><p><strong>在响应内容前面注入内容</strong>：<a href="./resPrepend.html">resPrepend</a></p><ul><li>在原始响应内容的前面插入内容</li></ul></li><li><p><strong>在响应内容后面追加内容</strong>：<a href="./resAppend.html">resAppend</a></p><ul><li>在原始响应内容的后面追加内容</li></ul></li><li><p><strong>替换请求内容</strong>：<a href="./reqBody.html">reqBody</a></p><ul><li>替换发送到服务器的请求体内容</li></ul></li><li><p><strong>直接返回本地文件</strong>：<a href="./file.html">file</a></p><ul><li>不请求服务器，直接返回本地文件内容</li></ul></li><li><p><strong>修改响应头</strong>：<a href="./resHeaders.html">resHeaders</a></p><ul><li>修改响应头部信息，如 <code>Content-Type</code></li></ul></li></ol><h2 id="扩展阅读" tabindex="-1">扩展阅读 <a class="header-anchor" href="#扩展阅读" aria-label="Permalink to &quot;扩展阅读&quot;">​</a></h2><ul><li><a href="./pattern.html">匹配模式文档</a>：详细了解 URL 匹配规则</li><li><a href="./operation.html">操作指令文档</a>：了解内容加载的多种方式</li><li><a href="./filters.html">过滤器文档</a>：了解更多过滤器功能</li></ul>`,67)]))}const b=e(l,[["render",o]]);export{u as __pageData,b as default};
