import{_ as t,c as a,o as s,ag as n}from"./chunks/framework.Bw-5EFTY.js";const h=JSON.parse('{"title":"statusCode","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/statusCode.md","filePath":"en/docs/rules/statusCode.md"}'),o={name:"en/docs/rules/statusCode.md"};function i(l,e,r,d,c,p){return s(),a("div",null,e[0]||(e[0]=[n(`<h1 id="statuscode" tabindex="-1">statusCode <a class="header-anchor" href="#statuscode" aria-label="Permalink to &quot;statusCode&quot;">​</a></h1><p>The <code>statusCode</code> protocol is used to immediately interrupt a request and return a specified HTTP status code, without forwarding the request to the backend server. Through the <code>statusCode</code> protocol, you can:</p><ul><li><strong>Quickly simulate specific HTTP status codes</strong>: Test various status code responses without a real server.</li><li><strong>Intercept and interrupt requests</strong>: Directly return a status code before the request reaches the real server.</li><li><strong>Test error scenarios</strong>: Simulate server errors, redirects, authentication failures, etc.</li><li><strong>Control request flow</strong>: Decide whether to allow the request to continue based on conditions.</li></ul><h2 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h2><p>The <code>statusCode</code> protocol supports multiple configuration methods:</p><h3 id="_1-inline-value-direct-specification" tabindex="-1">1. Inline Value (Direct Specification) <a class="header-anchor" href="#_1-inline-value-direct-specification" aria-label="Permalink to &quot;1. Inline Value (Direct Specification)&quot;">​</a></h3><p>Write the status code to return directly in the rule.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern statusCode://code [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/api/old-endpoint statusCode://410</span></span></code></pre></div><h3 id="_2-embedded-value-using-code-block" tabindex="-1">2. Embedded Value (Using Code Block) <a class="header-anchor" href="#_2-embedded-value-using-code-block" aria-label="Permalink to &quot;2. Embedded Value (Using Code Block)&quot;">​</a></h3><p>Use this method when you need to return different status codes based on conditions or want to reuse configurations.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern statusCode://{custom-key} [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` custom-key</span></span>
<span class="line"><span>404</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="_3-referencing-a-value-from-the-values-panel" tabindex="-1">3. Referencing a Value from the Values Panel <a class="header-anchor" href="#_3-referencing-a-value-from-the-values-panel" aria-label="Permalink to &quot;3. Referencing a Value from the Values Panel&quot;">​</a></h3><p>Reference a status code pre-defined in the <code>Values</code> panel (central configuration area).</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern statusCode://{key-of-values} [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Prerequisite</strong>: A key named <code>key-of-values</code> with a status code as its value must exist in <code>Values</code>.</p><h3 id="_4-file-remote-url-loading" tabindex="-1">4. File/Remote URL Loading <a class="header-anchor" href="#_4-file-remote-url-loading" aria-label="Permalink to &quot;4. File/Remote URL Loading&quot;">​</a></h3><p><strong>Currently NOT supported</strong> to dynamically load content from local files or remote URLs.</p><h2 id="parameter-details" tabindex="-1">Parameter Details <a class="header-anchor" href="#parameter-details" aria-label="Permalink to &quot;Parameter Details&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Required</th><th style="text-align:left;">Description &amp; Examples</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Expression used to match the request URL.<br>• Supports domains, paths, wildcards, regular expressions.<br>• See <a href="./pattern.html">Matching Pattern Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>code</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">HTTP response status code, such as:<br>• <code>200</code> OK<br>• <code>301</code> Permanent Redirect<br>• <code>302</code> Temporary Redirect<br>• <code>404</code> Not Found<br>• <code>500</code> Internal Server Error<br>• Supports all standard HTTP status codes.</td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Sets additional properties for the rule.<br>• Example: <code>lineProps://important</code> can increase this rule&#39;s priority.<br>• See <a href="./lineProps.html">lineProps Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Optional filter conditions for precise control over when the rule takes effect.<br>• Can match request URL, method, headers, body content.<br>• Can match response status code, headers.<br>• See <a href="./filters.html">Filters Documentation</a> for details.</td></tr></tbody></table><h2 id="configuration-examples" tabindex="-1">Configuration Examples <a class="header-anchor" href="#configuration-examples" aria-label="Permalink to &quot;Configuration Examples&quot;">​</a></h2><h3 id="basic-examples" tabindex="-1">Basic Examples <a class="header-anchor" href="#basic-examples" aria-label="Permalink to &quot;Basic Examples&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Return 404 status code (Page Not Found)</span></span>
<span class="line"><span>www.example.com/deleted-page statusCode://404</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return 500 status code (Internal Server Error)</span></span>
<span class="line"><span>www.example.com/api/error statusCode://500</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return 302 Redirect</span></span>
<span class="line"><span>www.example.com/old-url statusCode://302</span></span></code></pre></div><h3 id="simulating-authentication-failure" tabindex="-1">Simulating Authentication Failure <a class="header-anchor" href="#simulating-authentication-failure" aria-label="Permalink to &quot;Simulating Authentication Failure&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Authentication required when accessing, browser will pop up login dialog.</span></span>
<span class="line"><span>www.example.com/secure-area statusCode://401</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Disable the login dialog and directly return 401.</span></span>
<span class="line"><span>www.example.com/secure-area statusCode://401 disable://userLogin</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Or use lineProps to achieve the same effect.</span></span>
<span class="line"><span>www.example.com/secure-area statusCode://401 lineProps://disableUserLogin</span></span></code></pre></div><h3 id="combining-with-custom-response-content" tabindex="-1">Combining with Custom Response Content <a class="header-anchor" href="#combining-with-custom-response-content" aria-label="Permalink to &quot;Combining with Custom Response Content&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Return 404 status code with custom response content.</span></span>
<span class="line"><span>www.example.com/missing-page statusCode://404 resBody://(&lt;h1&gt;Page Not Found&lt;/h1&gt;)</span></span></code></pre></div><h3 id="using-with-filters" tabindex="-1">Using with Filters <a class="header-anchor" href="#using-with-filters" aria-label="Permalink to &quot;Using with Filters&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Return 405 (Method Not Allowed) only for specific request methods.</span></span>
<span class="line"><span>www.example.com/api/resource statusCode://405 includeFilter://m:PUT</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return different status codes based on request path matching.</span></span>
<span class="line"><span>/^https?://www\\.example\\.com/user/\\d+/profile/ statusCode://403</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return status code based on request header conditions.</span></span>
<span class="line"><span>www.example.com/api statusCode://429 includeFilter://reqH:user-agent=/bot/i</span></span></code></pre></div><h3 id="using-embedded-values" tabindex="-1">Using Embedded Values <a class="header-anchor" href="#using-embedded-values" aria-label="Permalink to &quot;Using Embedded Values&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` maintenance-status</span></span>
<span class="line"><span>503</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>www.example.com statusCode://{maintenance-status}</span></span></code></pre></div><h3 id="environment-specific-configuration" tabindex="-1">Environment-Specific Configuration <a class="header-anchor" href="#environment-specific-configuration" aria-label="Permalink to &quot;Environment-Specific Configuration&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` testing-403</span></span>
<span class="line"><span>403</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return 403 only in testing environment.</span></span>
<span class="line"><span>test.example.com/api/admin statusCode://{testing-403}</span></span></code></pre></div><h2 id="common-status-code-scenarios" tabindex="-1">Common Status Code Scenarios <a class="header-anchor" href="#common-status-code-scenarios" aria-label="Permalink to &quot;Common Status Code Scenarios&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Status Code</th><th style="text-align:left;">Scenario Description</th><th style="text-align:left;">Typical Use</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>200</strong></td><td style="text-align:left;">Successful Response</td><td style="text-align:left;">Test normal flow.</td></tr><tr><td style="text-align:left;"><strong>301/302</strong></td><td style="text-align:left;">Redirect</td><td style="text-align:left;">Test URL redirection logic.</td></tr><tr><td style="text-align:left;"><strong>400</strong></td><td style="text-align:left;">Bad Request</td><td style="text-align:left;">Test client error handling.</td></tr><tr><td style="text-align:left;"><strong>401</strong></td><td style="text-align:left;">Unauthorized</td><td style="text-align:left;">Test authentication flow.</td></tr><tr><td style="text-align:left;"><strong>403</strong></td><td style="text-align:left;">Forbidden</td><td style="text-align:left;">Test access control.</td></tr><tr><td style="text-align:left;"><strong>404</strong></td><td style="text-align:left;">Not Found</td><td style="text-align:left;">Test resource not found handling.</td></tr><tr><td style="text-align:left;"><strong>429</strong></td><td style="text-align:left;">Too Many Requests</td><td style="text-align:left;">Test rate limiting logic.</td></tr><tr><td style="text-align:left;"><strong>500</strong></td><td style="text-align:left;">Internal Server Error</td><td style="text-align:left;">Test server-side exception handling.</td></tr><tr><td style="text-align:left;"><strong>503</strong></td><td style="text-align:left;">Service Unavailable</td><td style="text-align:left;">Test maintenance page.</td></tr></tbody></table><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><h3 id="_1-response-content" tabindex="-1">1. Response Content <a class="header-anchor" href="#_1-response-content" aria-label="Permalink to &quot;1. Response Content&quot;">​</a></h3><ul><li>By default, the response content returned by <code>statusCode</code> is empty.</li><li>Custom response content can be set by combining with the <a href="./resBody.html"><code>resBody</code></a> protocol.</li></ul><h3 id="_2-authentication-popup-control" tabindex="-1">2. Authentication Popup Control <a class="header-anchor" href="#_2-authentication-popup-control" aria-label="Permalink to &quot;2. Authentication Popup Control&quot;">​</a></h3><ul><li>When returning a <code>401</code> status code, the browser authentication popup is triggered by default.</li><li>You can disable the popup in the following ways: <ul><li>Add <code>disable://userLogin</code>.</li><li>Add <code>lineProps://disableUserLogin</code>.</li><li>Use the reverse configuration of the <a href="./enable.html"><code>enable</code></a> protocol.</li></ul></li></ul><h3 id="_3-redirect-handling" tabindex="-1">3. Redirect Handling <a class="header-anchor" href="#_3-redirect-handling" aria-label="Permalink to &quot;3. Redirect Handling&quot;">​</a></h3><ul><li>When returning redirect status codes such as <code>301</code>, <code>302</code>, you need to specify the redirect address with the <a href="./resHeaders.html"><code>location</code></a> response header:<div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/old statusCode://302 resHeaders://location=&quot;https://www.example.com/new&quot;</span></span></code></pre></div></li></ul><h2 id="advanced-usage" tabindex="-1">Advanced Usage <a class="header-anchor" href="#advanced-usage" aria-label="Permalink to &quot;Advanced Usage&quot;">​</a></h2><h3 id="dynamic-status-codes" tabindex="-1">Dynamic Status Codes <a class="header-anchor" href="#dynamic-status-codes" aria-label="Permalink to &quot;Dynamic Status Codes&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Return different status codes based on time (maintenance window).</span></span>
<span class="line"><span>www.example.com/api statusCode://503 includeFilter://t:&gt;=00:00&amp;t:&lt;=06:00</span></span></code></pre></div><h3 id="combining-with-other-protocols" tabindex="-1">Combining with Other Protocols <a class="header-anchor" href="#combining-with-other-protocols" aria-label="Permalink to &quot;Combining with Other Protocols&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Return 403 with a custom error page.</span></span>
<span class="line"><span>www.example.com/blocked statusCode://403 resBody://&lt;h1&gt;Access Denied&lt;/h1&gt; resHeaders://content-type=&quot;text/html; charset=utf-8&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Return 503 and set retry time.</span></span>
<span class="line"><span>www.example.com/down statusCode://503 resHeaders://retry-after=&quot;3600&quot;</span></span></code></pre></div><h3 id="testing-client-fault-tolerance" tabindex="-1">Testing Client Fault Tolerance <a class="header-anchor" href="#testing-client-fault-tolerance" aria-label="Permalink to &quot;Testing Client Fault Tolerance&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Randomly return different error status codes to test client fault tolerance.</span></span>
<span class="line"><span>www.example.com/api/unstable statusCode://500 includeFilter://chance:0.5</span></span>
<span class="line"><span>www.example.com/api/unstable statusCode://429 includeFilter://chance:0.3</span></span>
<span class="line"><span>www.example.com/api/unstable statusCode://200 includeFilter://chance:0.2</span></span></code></pre></div><h2 id="difference-from-replacestatus" tabindex="-1">Difference from replaceStatus <a class="header-anchor" href="#difference-from-replacestatus" aria-label="Permalink to &quot;Difference from replaceStatus&quot;">​</a></h2><ul><li><strong><code>statusCode</code></strong>: Takes effect during the request stage, <strong>does not forward to the backend server</strong>.</li><li><strong><code>replaceStatus</code></strong>: Takes effect during the response stage, <strong>first requests the backend server</strong>, then replaces the returned status code.</li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="q-status-code-rule-is-not-taking-effect" tabindex="-1">Q: Status code rule is not taking effect. <a class="header-anchor" href="#q-status-code-rule-is-not-taking-effect" aria-label="Permalink to &quot;Q: Status code rule is not taking effect.&quot;">​</a></h3><p><strong>A:</strong> Check:</p><ol><li>Whether the rule pattern correctly matches the request URL.</li><li>Whether there are other higher-priority rules overriding it.</li><li>Whether the filter conditions are met.</li></ol><h3 id="q-browser-pops-up-authentication-window" tabindex="-1">Q: Browser pops up authentication window. <a class="header-anchor" href="#q-browser-pops-up-authentication-window" aria-label="Permalink to &quot;Q: Browser pops up authentication window.&quot;">​</a></h3><p><strong>A:</strong> For 401 status code:</p><ol><li>Check if <code>disable://userLogin</code> or <code>lineProps://disableUserLogin</code> is added.</li><li>Confirm if the rule order is correct.</li></ol><h3 id="q-client-displays-a-blank-page" tabindex="-1">Q: Client displays a blank page. <a class="header-anchor" href="#q-client-displays-a-blank-page" aria-label="Permalink to &quot;Q: Client displays a blank page.&quot;">​</a></h3><p><strong>A:</strong> Check:</p><ol><li>Whether custom response content is set.</li><li>Whether the <code>Content-Type</code> response header is correct.</li><li>Whether the response content encoding matches.</li></ol><h3 id="q-redirect-is-not-taking-effect" tabindex="-1">Q: Redirect is not taking effect. <a class="header-anchor" href="#q-redirect-is-not-taking-effect" aria-label="Permalink to &quot;Q: Redirect is not taking effect.&quot;">​</a></h3><p><strong>A:</strong> Check:</p><ol><li>Whether the <code>Location</code> response header is set.</li><li>Whether the redirect address format is correct.</li><li>Whether the browser follows the redirect rules.</li></ol><h2 id="related-protocols" tabindex="-1">Related Protocols <a class="header-anchor" href="#related-protocols" aria-label="Permalink to &quot;Related Protocols&quot;">​</a></h2><ol><li><strong>Replace response status code</strong>: <a href="./replaceStatus.html">replaceStatus</a><ul><li>The request first reaches the server, then replaces the returned status code.</li></ul></li><li><strong>Disable authentication popup</strong>: <a href="./disable.html">disable</a> or <a href="./lineProps.html">lineProps</a><ul><li>Disable the browser login popup triggered by 401 status code.</li></ul></li><li><strong>Set response content</strong>: <a href="./resBody.html">resBody</a><ul><li>Add custom content for status code responses.</li></ul></li><li><strong>Set response headers</strong>: <a href="./resHeaders.html">resHeaders</a><ul><li>Set necessary response headers for scenarios like redirects.</li></ul></li></ol><h2 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noreferrer">HTTP Status Codes MDN Documentation</a>: Learn the meaning of all HTTP status codes.</li><li><a href="./pattern.html">Matching Pattern Documentation</a>: Learn more about URL matching rules.</li><li><a href="./filters.html">Filters Documentation</a>: Learn more about filter functionalities.</li></ul>`,69)]))}const g=t(o,[["render",i]]);export{h as __pageData,g as default};
