import{_ as e,c as a,o as n,ag as s}from"./chunks/framework.Bw-5EFTY.js";const h=JSON.parse('{"title":"Rule Syntax","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/rule.md","filePath":"en/docs/rules/rule.md"}'),i={name:"en/docs/rules/rule.md"};function o(l,t,p,r,c,d){return n(),a("div",null,t[0]||(t[0]=[s(`<h1 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h1><p>Whistle modifies requests and responses through concise rule configurations, with each rule following the same basic syntax structure.</p><h2 id="syntax-structure" tabindex="-1">Syntax Structure <a class="header-anchor" href="#syntax-structure" aria-label="Permalink to &quot;Syntax Structure&quot;">​</a></h2><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern operation [lineProps...] [filters...]</span></span></code></pre></div><p>Each rule consists of the following four components:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Component</th><th style="text-align:left;">Required</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Expression for matching request URLs. Detailed documentation: <a href="./pattern.html">pattern</a></td></tr><tr><td style="text-align:left;"><strong>operation</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Operation command, formatted as <code>protocol://value</code>. Detailed documentation: <a href="./operation.html">operation</a></td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Additional configurations that apply only to the current rule. Detailed documentation: <a href="./lineProps.html">lineProps</a></td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Filter conditions for precise control over when the rule takes effect. Detailed documentation: <a href="./filters.html">filters</a></td></tr></tbody></table><h2 id="advanced-rule-configuration" tabindex="-1">Advanced Rule Configuration <a class="header-anchor" href="#advanced-rule-configuration" aria-label="Permalink to &quot;Advanced Rule Configuration&quot;">​</a></h2><h3 id="_1-combined-configuration" tabindex="-1">1. Combined Configuration <a class="header-anchor" href="#_1-combined-configuration" aria-label="Permalink to &quot;1. Combined Configuration&quot;">​</a></h3><p>A single rule can contain multiple operation commands, enabling complex functional combinations.</p><p><strong>Syntax</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern operation1 operation2 ... [includeFilter://pattern1 ... excludeFilter://patternN ...]</span></span></code></pre></div><p><strong>Example</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/* file:///static-files cache://3600 resCors://*</span></span></code></pre></div><p><strong>Explanation</strong>:</p><ul><li>Multiple operation commands are executed in order.</li><li>Supports combining any number of operation commands.</li><li>Filter conditions apply to the entire rule.</li></ul><h3 id="_2-position-swapping" tabindex="-1">2. Position Swapping <a class="header-anchor" href="#_2-position-swapping" aria-label="Permalink to &quot;2. Position Swapping&quot;">​</a></h3><p>When <code>operation</code> and the first <code>pattern</code> are not both in URL or domain format, their positions can be swapped.</p><p><strong>Syntax</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>operation pattern1 pattern2 ... [includeFilter://pattern1 ... excludeFilter://patternN ...]</span></span></code></pre></div><p><strong>Example</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Standard writing</span></span>
<span class="line"><span>www.example.com proxy://127.0.0.1:8080</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Position-swapped writing</span></span>
<span class="line"><span>proxy://127.0.0.1:8080 www.example.com api.example.com</span></span></code></pre></div><blockquote><p><strong>Limitations</strong>: <code>operation</code> and the first <code>pattern</code> cannot simultaneously be in the following formats:</p><ul><li><code>https://test.com/path</code></li><li><code>//test.com/path</code></li><li><code>test.com/path</code></li><li><code>test.com</code></li></ul></blockquote><p><strong>Applicable Scenarios</strong>:</p><ul><li>More concise when applying the same operation to multiple domains.</li><li>Batch configuration of proxy, redirect, and other rules.</li></ul><h3 id="_3-multi-line-configuration" tabindex="-1">3. Multi-line Configuration <a class="header-anchor" href="#_3-multi-line-configuration" aria-label="Permalink to &quot;3. Multi-line Configuration&quot;">​</a></h3><p>Use code blocks to achieve multi-line configurations, improving readability of complex rules.</p><p><strong>Syntax</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>line\`</span></span>
<span class="line"><span>operation</span></span>
<span class="line"><span>pattern1</span></span>
<span class="line"><span>pattern2</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>[includeFilter://pattern1</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>excludeFilter://patternN </span></span>
<span class="line"><span>...]</span></span>
<span class="line"><span>\`</span></span></code></pre></div><p><strong>Example</strong>:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>line\`</span></span>
<span class="line"><span>proxy://127.0.0.1:8080</span></span>
<span class="line"><span>www.example.com</span></span>
<span class="line"><span>api.example.com</span></span>
<span class="line"><span>static.example.com</span></span>
<span class="line"><span>includeFilter://m:GET</span></span>
<span class="line"><span>excludeFilter:///admin/</span></span>
<span class="line"><span>\`</span></span></code></pre></div><p><strong>Features</strong>:</p><ul><li>Whistle automatically replaces line breaks within the code block with spaces.</li><li>Maintains clean code formatting for easy reading and maintenance.</li><li>Suitable for scenarios involving multiple matching patterns and complex filter conditions.</li></ul><p><strong>Equivalent Conversion</strong>: The above multi-line configuration is equivalent to:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>proxy://127.0.0.1:8080 www.example.com api.example.com static.example.com includeFilter://m:GET excludeFilter:///admin/</span></span></code></pre></div><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><h3 id="_1-rule-priority" tabindex="-1">1. Rule Priority <a class="header-anchor" href="#_1-rule-priority" aria-label="Permalink to &quot;1. Rule Priority&quot;">​</a></h3><ul><li>Rules are executed in top-to-bottom order.</li><li>Later rules may override the effects of earlier rules.</li><li>Use <code>lineProps://important</code> to increase the priority of important rules.</li></ul><h3 id="_2-debugging-tips" tabindex="-1">2. Debugging Tips <a class="header-anchor" href="#_2-debugging-tips" aria-label="Permalink to &quot;2. Debugging Tips&quot;">​</a></h3><ol><li><strong>Step-by-step verification</strong>: Start with simple rules and gradually add complex conditions.</li><li><strong>Log viewing</strong>: Use the Overview panel in the Whistle Network interface to check rule matching.</li><li><strong>Browser debugging</strong>: Use browser developer tools to inspect actual effects.</li><li><strong>Temporary disabling</strong>: Use <code>#</code> to comment out rules temporarily for testing.</li></ol>`,39)]))}const g=e(i,[["render",o]]);export{h as __pageData,g as default};
