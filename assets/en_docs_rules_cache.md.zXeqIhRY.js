import{_ as a,c as s,o as t,ag as n}from"./chunks/framework.Bw-5EFTY.js";const g=JSON.parse('{"title":"cache","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/cache.md","filePath":"en/docs/rules/cache.md"}'),i={name:"en/docs/rules/cache.md"};function l(o,e,c,r,p,h){return t(),s("div",null,e[0]||(e[0]=[n(`<h1 id="cache" tabindex="-1">cache <a class="header-anchor" href="#cache" aria-label="Permalink to &quot;cache&quot;">​</a></h1><p>The <code>cache</code> protocol is used to quickly set cache control headers for responses, helping to manage caching behavior for browsers and servers. It can set caching policies for matched responses, including:</p><ul><li>Setting a fixed cache duration</li><li>Disabling caching (<code>no-cache</code>)</li><li>Completely prohibiting storage (<code>no-store</code>)</li></ul><p>This can help optimize website performance or ensure specific resources are not cached.</p><h2 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h2><p><code>cache</code> supports multiple ways to set caching policies:</p><h3 id="_1-inline-value-direct-specification" tabindex="-1">1. Inline Value (Direct Specification) <a class="header-anchor" href="#_1-inline-value-direct-specification" aria-label="Permalink to &quot;1. Inline Value (Direct Specification)&quot;">​</a></h3><p>Specify the caching policy directly in the rule.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Set cache for 5 seconds. Supports positive integers, 0, and negative integers.</span></span>
<span class="line"><span>pattern cache://5 [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Set cache headers: \`cache-control: no-cache\`, \`pragma: no-cache\`</span></span>
<span class="line"><span># \`no-cache\` can be abbreviated as \`no\`.</span></span>
<span class="line"><span>pattern cache://no-cache [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Set cache headers: \`cache-control: no-store\`, \`pragma: no-cache\`</span></span>
<span class="line"><span>pattern cache://no-store [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Examples:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api/data cache://no-cache</span></span>
<span class="line"><span>https://example.com/static/js cache://86400  # Cache for 24 hours</span></span></code></pre></div><h3 id="_2-embedded-value-using-code-block" tabindex="-1">2. Embedded Value (Using Code Block) <a class="header-anchor" href="#_2-embedded-value-using-code-block" aria-label="Permalink to &quot;2. Embedded Value (Using Code Block)&quot;">​</a></h3><p>Use this method when the caching policy needs to be reused or is complex.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern cache://{custom-key} [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` custom-key</span></span>
<span class="line"><span>no-cache</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="_3-referencing-a-value-from-the-values-panel" tabindex="-1">3. Referencing a Value from the Values Panel <a class="header-anchor" href="#_3-referencing-a-value-from-the-values-panel" aria-label="Permalink to &quot;3. Referencing a Value from the Values Panel&quot;">​</a></h3><p>Reference a caching policy pre-defined in the <code>Values</code> panel.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern cache://{key-of-values} [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Prerequisite:</strong> A key named <code>key-of-values</code> with the caching policy as its value must exist in <code>Values</code>.</p><h3 id="_4-file-remote-url-loading" tabindex="-1">4. File/Remote URL Loading <a class="header-anchor" href="#_4-file-remote-url-loading" aria-label="Permalink to &quot;4. File/Remote URL Loading&quot;">​</a></h3><p><strong>Currently NOT supported</strong> to dynamically load cache configuration from a local file or remote URL.</p><h2 id="parameter-details" tabindex="-1">Parameter Details <a class="header-anchor" href="#parameter-details" aria-label="Permalink to &quot;Parameter Details&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Required</th><th style="text-align:left;">Description &amp; Examples</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Expression used to match the request URL.<br>• Supports domains, paths, wildcards, regular expressions.<br>• See <a href="./pattern.html">Matching Pattern Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>value</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Caching policy value:<br>• <strong>Number</strong>: Cache duration in seconds (e.g., <code>60</code> means cache for 60 seconds)<br>• <strong>no-cache</strong> or <strong>no</strong>: Allows caching but requires revalidation on each use<br>• <strong>no-store</strong>: Completely prohibits caching<br>• Supports inline, embedded, and Values references<br>• ⚠️ Loading from files or remote URLs is not supported</td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Sets additional properties for the rule.<br>• Example: <code>lineProps://important</code> can increase this rule&#39;s priority.<br>• See <a href="./lineProps.html">lineProps Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Optional filter conditions for precise control over when the rule takes effect.<br>• Can match request URL, method, headers, body content.<br>• Can match response status code, headers.<br>• See <a href="./filters.html">Filters Documentation</a> for details.</td></tr></tbody></table><p><strong>Response Headers Affected:</strong></p><ul><li><code>Cache-Control</code></li><li><code>Expires</code></li><li><code>Pragma</code></li></ul><h2 id="caching-policy-explanation" tabindex="-1">Caching Policy Explanation <a class="header-anchor" href="#caching-policy-explanation" aria-label="Permalink to &quot;Caching Policy Explanation&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Policy</th><th style="text-align:left;">Meaning</th><th style="text-align:left;">Typical Use Cases</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Number (e.g., <code>60</code>)</strong></td><td style="text-align:left;">Caches the resource for the specified number of seconds</td><td style="text-align:left;">Static resources, API responses that don&#39;t change often</td></tr><tr><td style="text-align:left;"><strong>no-cache</strong> (or <strong>no</strong>)</td><td style="text-align:left;">Allows caching but must validate before each use</td><td style="text-align:left;">Frequently changing content, such as user data, real-time quotes</td></tr><tr><td style="text-align:left;"><strong>no-store</strong></td><td style="text-align:left;">Completely prohibits caching any version</td><td style="text-align:left;">Sensitive data, payment pages, one-time tokens</td></tr></tbody></table><h2 id="configuration-examples" tabindex="-1">Configuration Examples <a class="header-anchor" href="#configuration-examples" aria-label="Permalink to &quot;Configuration Examples&quot;">​</a></h2><h3 id="basic-examples" tabindex="-1">Basic Examples <a class="header-anchor" href="#basic-examples" aria-label="Permalink to &quot;Basic Examples&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Cache static resources for 1 hour</span></span>
<span class="line"><span>https://example.com/static cache://3600</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Disable caching for API endpoints</span></span>
<span class="line"><span>https://example.com/api cache://no-cache</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Prohibit caching for sensitive data</span></span>
<span class="line"><span>https://example.com/account cache://no-store</span></span></code></pre></div><h3 id="using-embedded-values" tabindex="-1">Using Embedded Values <a class="header-anchor" href="#using-embedded-values" aria-label="Permalink to &quot;Using Embedded Values&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/reports cache://{report-cache-policy}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` report-cache-policy</span></span>
<span class="line"><span>no-cache</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="using-with-filters" tabindex="-1">Using with Filters <a class="header-anchor" href="#using-with-filters" aria-label="Permalink to &quot;Using with Filters&quot;">​</a></h3><p>Set caching only for specific response status codes:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api cache://300 includeFilter://s:200</span></span></code></pre></div><h3 id="referencing-configuration-from-values" tabindex="-1">Referencing Configuration from Values <a class="header-anchor" href="#referencing-configuration-from-values" aria-label="Permalink to &quot;Referencing Configuration from Values&quot;">​</a></h3><p>Assuming the <code>static-cache</code> configuration already exists in Values:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/assets cache://{static-cache}</span></span></code></pre></div><h2 id="how-it-works-related-protocols" tabindex="-1">How It Works &amp; Related Protocols <a class="header-anchor" href="#how-it-works-related-protocols" aria-label="Permalink to &quot;How It Works &amp; Related Protocols&quot;">​</a></h2><ol><li><p><strong>Core Principle</strong>: The <code>cache</code> protocol automatically sets the corresponding cache control headers:</p><ul><li><p><code>cache://5</code> sets:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Cache-Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> max-age=5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Expires</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> [Current time + 5 seconds]</span></span></code></pre></div></li><li><p><code>cache://no-cache</code> sets:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Cache-Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-cache</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Pragma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-cache</span></span></code></pre></div></li><li><p><code>cache://no-store</code> sets:</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Cache-Control</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-store</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Pragma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-cache</span></span></code></pre></div></li></ul></li><li><p><strong>Related Protocols</strong>:</p><ul><li><strong>Disable Caching</strong>: A more thorough cache disabling solution that also removes cache-related headers from both requests and responses. See: <a href="./disable.html">disable://cache</a></li><li><strong>Manual Header Setting</strong>: For more complex cache control, you can use the <a href="./resHeaders.html"><code>resHeaders</code></a> protocol to manually set cache headers.</li></ul></li></ol><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><ul><li>Cache duration is in seconds; decimals are not supported.</li><li>Setting <code>no-cache</code> does not mean &quot;do not cache&quot; but rather &quot;must validate before use&quot;.</li><li>For scenarios requiring complete cache disabling, it is recommended to also use the <a href="./disable.html"><code>disable://cache</code></a> protocol.</li><li>Actual caching behavior is also influenced by server configuration and browser implementation.</li></ul>`,41)]))}const u=a(i,[["render",l]]);export{g as __pageData,u as default};
