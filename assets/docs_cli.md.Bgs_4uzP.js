import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.Bw-5EFTY.js";const o=JSON.parse('{"title":"命令行操作","description":"","frontmatter":{},"headers":[],"relativePath":"docs/cli.md","filePath":"docs/cli.md"}'),l={name:"docs/cli.md"};function h(p,s,e,k,r,d){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="命令行操作" tabindex="-1">命令行操作 <a class="header-anchor" href="#命令行操作" aria-label="Permalink to &quot;命令行操作&quot;">​</a></h1><p>Whistle 命令行版本支持以下命令行操作，查看完整命令行功能执行命令：<code>w2 -h</code>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Usage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> w2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">comman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [options]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Commands:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      Display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         Add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (.whistle.js </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Configure</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> settings</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ca</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          Manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> certificates</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Whistle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Whistle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         Start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> front</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> background</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> background</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> background</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Options:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -h,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                      output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> usage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -D,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --baseDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [baseDir]                         set storage root path</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -z,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --certDir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [directory]                       set custom certificate directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -l,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --localUIHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [hostname]                    set web UI domain (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">local.whistlejs.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -L,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --pluginHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [hostname]                     set plugin UI domains  (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">as:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;script=a.b.com&amp;vase=x.y.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -n,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [username]                       set web UI username</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -w,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [password]                       set web UI password</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -N,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --guestName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [username]                      set web UI guest username (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -W,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --guestPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [password]                  set web UI guest password (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -s,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sockets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [number]                          set max cached connections per domain (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">256</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -S,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --storage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [newStorageDir]                   set configuration storage directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -C,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [storageDir]                         copy configuration from specified directory</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -c,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dnsCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [time]                           set DNS cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 60000ms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -H,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [boundHost]                          set bound host (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INADDR_ANY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -p,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [proxyPort]                          set proxy port (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8899</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -P,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uiport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [uiport]                           set web UI port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -m,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --middlewares</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [script </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> startup</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> middlewares</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">xx,yy/zz.js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -M,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [mode]                               set startup mode (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pureProxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multiEnv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">capture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disableH2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -t,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ms]                              set request timeout (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 360000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -e,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --extra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [extraData]                         set plugin extra parameters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -f,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --secureFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [secureFilter]               set secure filter path</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -r,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shadowRules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [shadowRules]                 set default shadow rules</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -R,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reqCacheSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [reqCacheSize]               set request data cache size (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -F,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --frameCacheSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [frameCacheSize]           set WebSocket frame cache size (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 512</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -A,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --addon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [pluginPaths]                       add custom plugin paths</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [bypass]                                 auto configure proxy and install Root CA</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --cluster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [workers]                             start cluster with worker count (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CPU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cores</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [config]                               load startup config from file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --rcPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [rcPath]                               load configuration from file (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ～/.whistlerc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --dnsServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [dnsServer]                         set custom DNS servers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --socksPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [socksPort]                         set SOCKSv5 server port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --httpPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [httpPort]                           set HTTP server port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --httpsPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [httpsPort]                         set HTTPS server port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --allowOrigin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [originList]                      set allowed CORS origins (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.b.c,x.y.z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --no-global-plugins</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --no-prev-options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                               ignore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> previous</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --inspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[host:]port]                         enable inspector (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:9229</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  --inspectBrk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[host:]port]                      enable inspector with breakpoint (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:9229</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -V,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                   output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> number</span></span></code></pre></div><h2 id="w2-start" tabindex="-1">w2 start <a class="header-anchor" href="#w2-start" aria-label="Permalink to &quot;w2 start&quot;">​</a></h2><ol><li><code>w2 start</code>：启动 Whistle，并使用默认存储目录</li><li><code>w2 start -p 8100</code>：启动指定端口的 Whistle（默认为 <code>8899</code>）</li><li><code>w2 start --httpsPort 8001</code>：启动 Whistle，并开启 HTTPS 代理端口</li><li><code>w2 start --socksPort 1080</code>：启动 Whistle，并开启 SOCKSv5 代理端口</li><li><code>w2 start -S storageName</code>：启动指定存储目录的 Whistle（大写 <code>S</code>）</li></ol><blockquote><p><code>storageName</code> 应为纯目录名（非完整路径），多实例运行时需满足：</p><ul><li>每个实例使用独立目录</li><li>配置不同监听端口</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> storageName2</span></span></code></pre></div></blockquote><h2 id="w2-restart" tabindex="-1">w2 restart <a class="header-anchor" href="#w2-restart" aria-label="Permalink to &quot;w2 restart&quot;">​</a></h2><ol><li><code>w2 restart</code>：重启 Whistle <ul><li>如果对应的端口和存储目录未有运行的 Whistle 实例，则会启动该 Whistle</li><li>如果对应的端口和存储目录有运行的 Whistle 实例，会先关闭该实例再启动</li></ul></li><li><code>w2 restart --no-prev-options</code>：等价于 <code>w2 stop &amp;&amp; w2 start</code></li><li><code>w2 restart -p 8100</code>：重启并修改端口</li><li><code>w2 starrestartt --httpsPort 8001</code>：重启并开启 HTTPS 代理端口</li><li><code>w2 restart --socksPort 1080</code>：重启并开启 SOCKSv5 代理端口</li><li><code>w2 restart -S storageName</code>：重启指定存储目录的 Whistle 实例</li></ol><h2 id="w2-stop" tabindex="-1">w2 stop <a class="header-anchor" href="#w2-stop" aria-label="Permalink to &quot;w2 stop&quot;">​</a></h2><ol><li><code>w2 stop</code>：停止默认存储目录下的 Whistle</li><li><code>w2 stop -S storageName</code>：停止指定存储目录的 Whistle</li></ol><blockquote><p>可通过下面 <code>w2 status --all</code> 查看当前命令行后台运行的 Whistle 实例</p></blockquote><h2 id="w2-status" tabindex="-1">w2 status <a class="header-anchor" href="#w2-status" aria-label="Permalink to &quot;w2 status&quot;">​</a></h2><ol><li>输出所有当前命令行后台运行的 Whistle 实例：<code>w2 status --all</code><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] All running Whistle instances:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PID:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 51512,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Port:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8899</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PID:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 53951,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Port:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8080,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Storage:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span></span></code></pre></div></li><li>输出命令行后台运行的默认实例：<code>w2 status</code><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] whistle@version is running</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] 1. use your device to visit the following URL list, gets the IP of the URL you can access:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      http://127.0.0.1:8899/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      http://192.168.10.153:8899/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      http://10.211.55.2:8899/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      http://10.37.129.2:8899/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Note:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> If</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> URLs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> are</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inaccessible,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> settings</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            For</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> see</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/avwo/whistle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] 2. set the HTTP proxy on your device with the above IP &amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PORT(8899</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[i] 3. use Chrome to visit http://local.whistlejs.com/ to get started</span></span></code></pre></div></li></ol><h2 id="w2-add" tabindex="-1">w2 add <a class="header-anchor" href="#w2-add" aria-label="Permalink to &quot;w2 add&quot;">​</a></h2><ol><li><code>w2 add</code>：执行当前目录下的 <code>.whistle.js</code>（或 <code>.whistle.mjs</code>）并将 export 出来的 <code>name</code>、<code>rules</code>、或 <code>groupName</code>（可选） 设置到界面的 Rules 里面</li><li><code>w2 add filepath</code>：自定义执行的文件</li></ol><p><code>.whistle.js</code> 文件内容：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.groupName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;项目开发环境&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可选，设置分组， 要求 Whistle 版本 &gt;= v2.9.21</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`[\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}]本地环境配置\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.rules </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test.example.com http://127.0.0.1:5566</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># cgi走现网</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test.example.com/cgi-bin ignore://http</span></span></code></pre></div><p>或异步获取规则：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assert)</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">const path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">const pkg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果依赖插件，可以检查插件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(util.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@scope/whistle.combo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> util.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;whistle.combo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;请先安装插件: w2 i whisltle.combo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 也可以远程获取规则</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // do sth</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`[\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}]本地环境配置\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rules:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      test.example.com/combo whisle.combo://\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">__dirname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dev&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      test.example.com http://127.0.0.1:5566</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      # 接口走现网</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      test.example.com/cgi-bin ignore://http</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      \`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>Whistle 会检查是否存在同名规则：</p><ul><li>规则不存在或为空：自动创建新规则并启用</li><li>规则已存在且非空：提示用户确认，避免意外覆盖</li><li>若需强制覆盖已有规则，请显式添加 <code>--force</code> 参数：<div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span></code></pre></div></li></ul><h2 id="w2-proxy" tabindex="-1">w2 proxy <a class="header-anchor" href="#w2-proxy" aria-label="Permalink to &quot;w2 proxy&quot;">​</a></h2><ol><li><code>w2 proxy</code>：设置系统代理 <ul><li>IP：<code>127.0.0.1</code></li><li>端口：Whistle 运行的端口，如果没有运行的 Whistle，用默认端口 <code>8899</code></li></ul></li><li><code>w2 proxy 0</code>：关闭系统代理</li><li><code>w2 proxy 8100</code>：设置系统代理 <ul><li>IP：<code>127.0.0.1</code></li><li>端口：<code>8100</code></li></ul></li><li><code>w2 proxy www.test.com:8100</code>：设置系统代理 <ul><li>IP 或域名：<code>www.test.com</code></li><li>端口：<code>8100</code></li></ul></li></ol><h2 id="w2-ca" tabindex="-1">w2 ca <a class="header-anchor" href="#w2-ca" aria-label="Permalink to &quot;w2 ca&quot;">​</a></h2><ol><li><code>w2 ca</code>：安装本地 Whistle 的根证书（安装本地 Whistle 根证书一般用这个命令即可）</li><li><code>w2 ca 8080</code>：从指定端口（IP：<code>127.0.0.1</code>）下载 Whistle 根证书并安装</li><li><code>w2 ca www.test.com:8080</code>：安装指定端口及 IP（或域名）的 Whistle 证书（可用于安装远程的 Whistle 根证书）</li><li><code>w2 ca certUrl</code>：下载指定 URL 的证书并安装</li><li><code>w2 ca localCertPath</code>：安装本地指定路径的证书</li></ol><h2 id="w2-install" tabindex="-1">w2 install <a class="header-anchor" href="#w2-install" aria-label="Permalink to &quot;w2 install&quot;">​</a></h2><ol><li><code>w2 install whistle.script</code>：安装插件</li><li><code>w2 install whistle.script --registry=https://npm-registry</code>：安装插件，并指定 npm registry</li></ol><p>推荐使用界面安装：<a href="./extensions/usage.html">使用插件</a></p><h2 id="w2-uninstall" tabindex="-1">w2 uninstall <a class="header-anchor" href="#w2-uninstall" aria-label="Permalink to &quot;w2 uninstall&quot;">​</a></h2><p><code>w2 uninstall whistle.script</code>：卸载指定插件</p><p>推荐使用界面卸载：<a href="./extensions/usage.html">使用插件</a></p><h2 id="w2-exec" tabindex="-1">w2 exec <a class="header-anchor" href="#w2-exec" aria-label="Permalink to &quot;w2 exec&quot;">​</a></h2><p><code>w2 exec xxx</code>：执行插件在 package.json 中配置的 bin 命令（即插件提供的可执行脚本）</p><blockquote><p>适用于插件开发者或需要调用插件 CLI 功能的场景</p></blockquote><h2 id="w2-run" tabindex="-1">w2 run <a class="header-anchor" href="#w2-run" aria-label="Permalink to &quot;w2 run&quot;">​</a></h2><p><code>w2 run</code>：以开发调试模式启动 Whistle，实时输出插件和系统的日志信息到控制台，修改界面代码刷新自动生效等，并支持所有 <code>w2 start</code> 的参数配置</p><p>以下是优化后的帮助文档：</p><h2 id="启动多个实例" tabindex="-1">启动多个实例 <a class="header-anchor" href="#启动多个实例" aria-label="Permalink to &quot;启动多个实例&quot;">​</a></h2><p>当需要同时运行多个实例时，必须为每个实例配置<strong>不同的端口</strong>和<strong>独立的存储目录</strong>，避免资源冲突。</p><h3 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 实例1 - 端口8010，存储目录8010</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --storage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 实例2 - 端口8011，存储目录8011  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --storage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 实例3 - 端口8012，存储目录8012</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8012</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --storage</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8012</span></span></code></pre></div><h3 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th>作用</th><th>要求</th></tr></thead><tbody><tr><td><code>--port</code></td><td>服务监听端口</td><td>必须唯一，不能重复</td></tr><tr><td><code>--storage</code></td><td>数据存储目录</td><td>必须唯一，避免数据混淆</td></tr></tbody></table><h3 id="配置建议" tabindex="-1">配置建议 <a class="header-anchor" href="#配置建议" aria-label="Permalink to &quot;配置建议&quot;">​</a></h3><p><strong>推荐配置</strong>：</p><ul><li>端口与存储目录使用相同编号（便于管理）</li><li>端口号范围：8000-9000（避免系统端口冲突）</li></ul><p><strong>配置示例</strong>：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ 推荐：端口与存储目录一致</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ 允许：端口与存储目录不同（需确保唯一性）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8020</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> instance_1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8021</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> instance_2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ❌ 错误：端口或存储目录重复</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 端口冲突！</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8011</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8010</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 存储目录冲突！</span></span></code></pre></div><h3 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h3><ol><li><strong>端口冲突</strong>：相同端口会导致实例启动失败</li><li><strong>数据安全</strong>：共享存储目录会造成数据覆盖或损坏</li><li><strong>资源隔离</strong>：每个实例应有独立的运行环境</li></ol><p>通过为每个实例分配唯一的端口和存储目录，可以确保多个实例稳定并行运行。</p><h2 id="whistlerc" tabindex="-1">启动配置文件 <a class="header-anchor" href="#whistlerc" aria-label="Permalink to &quot;启动配置文件 {#whistlerc}&quot;">​</a></h2><p>Whistle 启动时会自动加载 ~/.whistlerc 配置文件。您可以通过以下方式管理配置加载：</p><ul><li><strong>默认路径:</strong> <code>~/.whistlerc</code></li><li><strong>自定义路径:</strong> 使用 <code>--rcPath [rcPath]</code> 参数指定其他配置文件</li><li><strong>忽略配置:</strong> 使用 <code>-rcPath none</code> 参数完全忽略配置文件</li></ul><p><code>.whistlerc</code> 文件采用键值对格式，支持多种配置作用域：</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 全局默认配置（没有指定 storage）</span></span>
<span class="line"><span>username=test</span></span>
<span class="line"><span>password=123</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 特定存储配置（通过命令行指定 storage）</span></span>
<span class="line"><span>xxx.username=test-storage</span></span>
<span class="line"><span>xxx.password=123-storage</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 通配符配置（对所有实例生效，优先级最低）</span></span>
<span class="line"><span>*.username=test-default</span></span>
<span class="line"><span>*.password=123-default</span></span></code></pre></div><ol><li><code>xxx</code> 为启动参数 <code>--storage</code> 对应的值（没有 storage 则使用缺省的配置）</li><li><code>*</code> 表示对所实例生效（优先级最低）</li><li>其它配置参数参考本文档</li></ol><h2 id="其它参数" tabindex="-1">其它参数 <a class="header-anchor" href="#其它参数" aria-label="Permalink to &quot;其它参数&quot;">​</a></h2><ol><li><code>-D, --baseDir [baseDir]</code>：自定义 Whistle 存储根目录（默认为 <code>$WWHISTLE_PATH/.whistle</code>） <blockquote><p>示例：<code>w2 start -D ~/my_whistle_data</code></p></blockquote></li><li><code>-n, --username [username]</code>：设置管理界面登录用户名</li><li><code>-w, --password [password]</code>：设置管理界面登录密码 <blockquote><p>示例：<code>w2 start -n abc -w 123</code></p></blockquote></li><li><code>-N, --guestName [username]</code>：设置只读权限的游客账号（游客仅可查看配置和抓包，不可修改）</li><li><code>-W, --guestPassword [password]</code>：设置游客账号密码（游客仅可查看配置和抓包，不可修改） <blockquote><p>示例：<code>w2 start -N test -W 123</code></p></blockquote></li><li><code>-P, --uiport [uiport]</code>：单独设置管理界面端口（默认与代理端口相同） <blockquote><p>示例：<code>w2 start -P 8889</code></p></blockquote></li><li><code>-e, --extra [extraData]</code>：启动时向指定插件传递数据（<code>如：{inspect: data}</code>） <blockquote><p>示例：<code>w2 start -e &#39;{&quot;debug&quot;:true}&#39;</code></p></blockquote></li><li><code>--allowOrigin [originList]</code>：允许跨域请求管理界面接口的域名 <blockquote><p>示例：<code>w2 start --allowOrigin *</code></p></blockquote></li><li><code>--no-global-plugins</code>：启动时不加载 <code>npm i -g whistle.xxx</code> 安装的插件 <blockquote><p>示例：<code>w2 start --no-global-plugins</code></p></blockquote></li><li><code>--inspect [[host:]port]</code>：启用Node.js调试（默认9229端口），配合Chrome DevTools使用 <blockquote><p>示例：<code>w2 start --inspect</code></p></blockquote></li><li><code>--inspectBrk [[host:]port]</code>：启用调试并在首行断点 <blockquote><p>示例：<code>w2 start --inspectBrk</code></p></blockquote></li><li><code>--config [config]</code>：通过配置文件加载参数 <blockquote><p>示例：<code>w2 start --config /data/xxx.json</code></p></blockquote></li></ol><p>给请求设置用户密码需要用到插件（或自己开发插件）：<a href="https://github.com/whistle-plugins/whistle.proxyauth" target="_blank" rel="noreferrer">whistle.proxyauth</a></p>`,60)]))}const g=i(l,[["render",h]]);export{o as __pageData,g as default};
