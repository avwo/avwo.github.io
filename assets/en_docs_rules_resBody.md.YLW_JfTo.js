import{_ as a,c as t,o as s,ag as n}from"./chunks/framework.Bw-5EFTY.js";const u=JSON.parse('{"title":"resBody","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/resBody.md","filePath":"en/docs/rules/resBody.md"}'),o={name:"en/docs/rules/resBody.md"};function i(l,e,r,p,c,d){return s(),t("div",null,e[0]||(e[0]=[n(`<h1 id="resbody" tabindex="-1">resBody <a class="header-anchor" href="#resbody" aria-label="Permalink to &quot;resBody&quot;">​</a></h1><p>The <code>resBody</code> protocol is used to replace the response body of a specified request. It only takes effect on status codes that include a response body (such as <code>200</code>, <code>500</code>, etc.).</p><blockquote><p><strong>Effective Condition</strong>: Only takes effect on status codes with a response body.</p><p>⚠️ Note: Requests without a response body, such as <code>204</code>, <code>304</code>, are not affected.</p></blockquote><h2 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h2><p><code>resBody</code> supports multiple ways to specify the response content to replace:</p><h3 id="_1-inline-value-direct-specification" tabindex="-1">1. Inline Value (Direct Specification) <a class="header-anchor" href="#_1-inline-value-direct-specification" aria-label="Permalink to &quot;1. Inline Value (Direct Specification)&quot;">​</a></h3><p>Write the content to replace directly in the rule, suitable for short text content.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://(value) [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/api/data resBody://({&quot;status&quot;:&quot;modified&quot;})</span></span></code></pre></div><h3 id="_2-embedded-value-using-code-block" tabindex="-1">2. Embedded Value (Using Code Block) <a class="header-anchor" href="#_2-embedded-value-using-code-block" aria-label="Permalink to &quot;2. Embedded Value (Using Code Block)&quot;">​</a></h3><p>This method is recommended when dealing with complex content containing spaces, line breaks, or when you want to reuse a configuration.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://{custom-key.json} [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` custom-key.json</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;status&quot;: &quot;success&quot;,</span></span>
<span class="line"><span>  &quot;data&quot;: {</span></span>
<span class="line"><span>    &quot;message&quot;: &quot;This response was modified by resBody&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="_3-referencing-a-value-from-the-values-panel" tabindex="-1">3. Referencing a Value from the Values Panel <a class="header-anchor" href="#_3-referencing-a-value-from-the-values-panel" aria-label="Permalink to &quot;3. Referencing a Value from the Values Panel&quot;">​</a></h3><p>When the content is large, you can store it in the <code>Values</code> configuration area.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://{key-of-values.html} [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Prerequisite</strong>: A key named <code>key-of-values.html</code> with the content to replace as its value must exist in <code>Values</code>.</p><h3 id="_4-loading-from-a-file-path-or-remote-url" tabindex="-1">4. Loading from a File Path or Remote URL <a class="header-anchor" href="#_4-loading-from-a-file-path-or-remote-url" aria-label="Permalink to &quot;4. Loading from a File Path or Remote URL&quot;">​</a></h3><p>Load the response content to replace from a local file or remote URL.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Load from a local file</span></span>
<span class="line"><span>pattern resBody:///User/xxx/test.txt</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Load from a remote URL</span></span>
<span class="line"><span>pattern resBody://https://www.example.com/override-content.txt</span></span></code></pre></div><h3 id="_5-loading-from-a-temporary-file" tabindex="-1">5. Loading from a Temporary File <a class="header-anchor" href="#_5-loading-from-a-temporary-file" aria-label="Permalink to &quot;5. Loading from a Temporary File&quot;">​</a></h3><p>Use Whistle&#39;s temporary file feature when content needs frequent editing.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern resBody://temp/blank.txt</span></span></code></pre></div><p><strong>Steps:</strong></p><ol><li>In the Rules editor, hold down <code>Command</code> (Mac) / <code>Ctrl</code> (Windows).</li><li>Click with the mouse on <code>resBody://temp/blank.txt</code>.</li><li>Enter the replacement content in the pop-up editing dialog.</li><li>Click <code>Save</code> to save.</li></ol><h2 id="parameter-details" tabindex="-1">Parameter Details <a class="header-anchor" href="#parameter-details" aria-label="Permalink to &quot;Parameter Details&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Required</th><th style="text-align:left;">Description &amp; Examples</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Expression used to match the request URL.<br>• Supports domains, paths, wildcards, regular expressions.<br>• See <a href="./pattern.html">Matching Pattern Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>value</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">The response content to replace, supporting multiple formats:<br>• Local file path<br>• Remote URL<br>• Inline, embedded, Values references</td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Sets additional properties for the rule.<br>• Example: <code>lineProps://important</code> can increase this rule&#39;s priority.<br>• See <a href="./lineProps.html">lineProps Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Optional filter conditions for precise control over when the rule takes effect.<br>• Can match request URL, method, headers, body content.<br>• Can match response status code, headers.<br>• See <a href="./filters.html">Filters Documentation</a> for details.</td></tr></tbody></table><h2 id="configuration-examples" tabindex="-1">Configuration Examples <a class="header-anchor" href="#configuration-examples" aria-label="Permalink to &quot;Configuration Examples&quot;">​</a></h2><h3 id="basic-examples" tabindex="-1">Basic Examples <a class="header-anchor" href="#basic-examples" aria-label="Permalink to &quot;Basic Examples&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace API response content</span></span>
<span class="line"><span>www.example.com/api/data resBody://({&quot;status&quot;:&quot;custom&quot;,&quot;data&quot;:&quot;modifiedContent&quot;})</span></span></code></pre></div><h3 id="using-embedded-values" tabindex="-1">Using Embedded Values <a class="header-anchor" href="#using-embedded-values" aria-label="Permalink to &quot;Using Embedded Values&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>\`\`\` error-response</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;error&quot;: {</span></span>
<span class="line"><span>    &quot;code&quot;: 1001,</span></span>
<span class="line"><span>    &quot;message&quot;: &quot;Custom error message for testing&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>\`\`\`</span></span>
<span class="line"><span></span></span>
<span class="line"><span>www.example.com/api resBody://{error-response} includeFilter://s:500</span></span></code></pre></div><h3 id="loading-from-a-file" tabindex="-1">Loading from a File <a class="header-anchor" href="#loading-from-a-file" aria-label="Permalink to &quot;Loading from a File&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Load replacement content from a local file</span></span>
<span class="line"><span>www.example.com/api/config resBody:///Users/username/mock/config.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Load replacement content from a remote URL</span></span>
<span class="line"><span>www.example.com/api/data resBody://https://raw.githubusercontent.com/user/repo/main/mock-data.json</span></span></code></pre></div><h3 id="using-temporary-files" tabindex="-1">Using Temporary Files <a class="header-anchor" href="#using-temporary-files" aria-label="Permalink to &quot;Using Temporary Files&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com/api/user resBody://temp/blank.json</span></span></code></pre></div><blockquote><p>In the Rules editor, hold down <code>Command</code> (Mac) / <code>Ctrl</code> (Windows) and click on <code>resBody://temp/blank.json</code> with the mouse to edit.</p></blockquote><h3 id="using-with-filters" tabindex="-1">Using with Filters <a class="header-anchor" href="#using-with-filters" aria-label="Permalink to &quot;Using with Filters&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace only responses with a specific status code</span></span>
<span class="line"><span>www.example.com/api resBody://({&quot;error&quot;:&quot;ServiceUnavailable&quot;}) includeFilter://s:503</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Determine replacement content based on request method</span></span>
<span class="line"><span>www.example.com/api/users resBody://({&quot;method&quot;:&quot;GEToverride&quot;}) includeFilter://m:GET</span></span>
<span class="line"><span>www.example.com/api/users resBody://({&quot;method&quot;:&quot;POSToverride&quot;}) includeFilter://m:POST</span></span></code></pre></div><h2 id="advanced-usage" tabindex="-1">Advanced Usage <a class="header-anchor" href="#advanced-usage" aria-label="Permalink to &quot;Advanced Usage&quot;">​</a></h2><h3 id="dynamic-content-replacement" tabindex="-1">Dynamic Content Replacement <a class="header-anchor" href="#dynamic-content-replacement" aria-label="Permalink to &quot;Dynamic Content Replacement&quot;">​</a></h3><p>Use regular expressions for dynamic content construction:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace the timestamp in the original response with the current time</span></span>
<span class="line"><span>www.example.com/api/time resBody://\`({&quot;timestamp&quot;:\${now}})\`</span></span></code></pre></div><h3 id="environment-specific-replacement" tabindex="-1">Environment-Specific Replacement <a class="header-anchor" href="#environment-specific-replacement" aria-label="Permalink to &quot;Environment-Specific Replacement&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Development environment: Use mock data</span></span>
<span class="line"><span>dev-api.example.com resBody://{&quot;env&quot;:&quot;development&quot;,&quot;data&quot;:&quot;mock&quot;}</span></span></code></pre></div><h3 id="error-scenario-testing" tabindex="-1">Error Scenario Testing <a class="header-anchor" href="#error-scenario-testing" aria-label="Permalink to &quot;Error Scenario Testing&quot;">​</a></h3><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Simulate various error responses</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;RateLimitExceeded&quot;} includeFilter://s:429</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;InternalServerError&quot;} includeFilter://s:500</span></span>
<span class="line"><span>www.example.com/api resBody://{&quot;error&quot;:&quot;ServiceUnavailable&quot;} includeFilter://s:503</span></span></code></pre></div><h2 id="differences-from-the-file-protocol" tabindex="-1">Differences from the file Protocol <a class="header-anchor" href="#differences-from-the-file-protocol" aria-label="Permalink to &quot;Differences from the file Protocol&quot;">​</a></h2><p>The main distinction between the <code>resBody</code> protocol and the <a href="./file.html"><code>file</code></a> protocol lies in the request processing flow:</p><h3 id="processing-flow-comparison" tabindex="-1">Processing Flow Comparison <a class="header-anchor" href="#processing-flow-comparison" aria-label="Permalink to &quot;Processing Flow Comparison&quot;">​</a></h3><ul><li><strong><code>resBody</code> protocol</strong>: The request <strong>is first sent to the backend server</strong> to obtain the original response, then <strong>replaces</strong> the original response body with the specified content.</li><li><strong><code>file</code> protocol</strong>: The request <strong>is not sent to the backend server</strong>; it directly returns the specified file content.</li></ul><h3 id="use-case-comparison" tabindex="-1">Use Case Comparison <a class="header-anchor" href="#use-case-comparison" aria-label="Permalink to &quot;Use Case Comparison&quot;">​</a></h3><ul><li><strong><code>resBody</code></strong>: Suitable for modifying the return content of real APIs while maintaining the complete request-response flow.</li><li><strong><code>file</code></strong>: Suitable for complete local simulation, independent of real backend services.</li></ul><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><h3 id="response-type-preservation" tabindex="-1">Response Type Preservation <a class="header-anchor" href="#response-type-preservation" aria-label="Permalink to &quot;Response Type Preservation&quot;">​</a></h3><ul><li><code>resBody</code> replaces the response body content and does not automatically modify the <code>Content-Type</code> response header.</li><li>If you need to modify the response type, use it in conjunction with the <a href="./resType.html"><code>resType</code></a> protocol.</li></ul><h2 id="common-questions" tabindex="-1">Common Questions <a class="header-anchor" href="#common-questions" aria-label="Permalink to &quot;Common Questions&quot;">​</a></h2><h3 id="q-the-resbody-rule-is-not-taking-effect" tabindex="-1">Q: The resBody rule is not taking effect. <a class="header-anchor" href="#q-the-resbody-rule-is-not-taking-effect" aria-label="Permalink to &quot;Q: The resBody rule is not taking effect.&quot;">​</a></h3><p><strong>A:</strong> Check:</p><ol><li>Whether the response status code has a response body (excluding 204, 304, etc.).</li><li>Whether the rule pattern correctly matches the request URL.</li><li>Whether the filter conditions are met.</li><li>Whether a higher-priority rule is overriding it.</li></ol><h3 id="q-can-i-replace-only-specific-types-of-responses" tabindex="-1">Q: Can I replace only specific types of responses? <a class="header-anchor" href="#q-can-i-replace-only-specific-types-of-responses" aria-label="Permalink to &quot;Q: Can I replace only specific types of responses?&quot;">​</a></h3><p><strong>A:</strong> Yes, use filters:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Replace only JSON responses</span></span>
<span class="line"><span>pattern resBody://content includeFilter://resH:content-type=json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Replace only responses from specific paths</span></span>
<span class="line"><span>pattern resBody://content includeFilter://*/api/v1/</span></span></code></pre></div><h2 id="related-protocols" tabindex="-1">Related Protocols <a class="header-anchor" href="#related-protocols" aria-label="Permalink to &quot;Related Protocols&quot;">​</a></h2><ol><li><strong>Inject content before the response body</strong>: <a href="./resPrepend.html">resPrepend</a><ul><li>Inserts content before the original response body.</li></ul></li><li><strong>Append content after the response body</strong>: <a href="./resAppend.html">resAppend</a><ul><li>Appends content after the original response body.</li></ul></li><li><strong>Replace request content</strong>: <a href="./reqBody.html">reqBody</a><ul><li>Replaces the request body content sent to the server.</li></ul></li><li><strong>Directly return local file content</strong>: <a href="./file.html">file</a><ul><li>Does not request the server; directly returns local file content.</li></ul></li><li><strong>Modify response headers</strong>: <a href="./resHeaders.html">resHeaders</a><ul><li>Modifies response header information, such as <code>Content-Type</code>.</li></ul></li></ol><h2 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h2><ul><li><a href="./pattern.html">Matching Pattern Documentation</a>: Learn more about URL matching rules.</li><li><a href="./operation.html">Operation Commands Documentation</a>: Learn about multiple ways to load content.</li><li><a href="./filters.html">Filters Documentation</a>: Learn more about filter functionalities.</li></ul>`,67)]))}const m=a(o,[["render",i]]);export{u as __pageData,m as default};
