import{_ as a,c as t,o as s,ag as n}from"./chunks/framework.Bw-5EFTY.js";const u=JSON.parse('{"title":"auth","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/rules/auth.md","filePath":"en/docs/rules/auth.md"}'),i={name:"en/docs/rules/auth.md"};function o(l,e,r,p,d,c){return s(),t("div",null,e[0]||(e[0]=[n(`<h1 id="auth" tabindex="-1">auth <a class="header-anchor" href="#auth" aria-label="Permalink to &quot;auth&quot;">​</a></h1><p>The <code>auth</code> protocol is used to quickly modify the <code>Authorization</code> header of a request, automatically adding the credentials required for HTTP Basic Authentication to matching requests.</p><h2 id="rule-syntax" tabindex="-1">Rule Syntax <a class="header-anchor" href="#rule-syntax" aria-label="Permalink to &quot;Rule Syntax&quot;">​</a></h2><p><code>auth</code> supports multiple ways to set the request authentication header:</p><h3 id="_1-inline-value-direct-specification" tabindex="-1">1. Inline Value (Direct Specification) <a class="header-anchor" href="#_1-inline-value-direct-specification" aria-label="Permalink to &quot;1. Inline Value (Direct Specification)&quot;">​</a></h3><p>Write the username and password directly in the rule.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern auth://username:password [lineProps...] [filters...]</span></span>
<span class="line"><span># or</span></span>
<span class="line"><span>pattern auth://username=test&amp;password=123 [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Example:</strong></p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api1/ auth://admin:secret</span></span>
<span class="line"><span>https://example.com/api2/ auth://username=admin&amp;password=secret</span></span></code></pre></div><h3 id="_2-embedded-value-using-code-block" tabindex="-1">2. Embedded Value (Using Code Block) <a class="header-anchor" href="#_2-embedded-value-using-code-block" aria-label="Permalink to &quot;2. Embedded Value (Using Code Block)&quot;">​</a></h3><p>Use this method when the credentials are complex or need to be reused. Reference a custom key in the rule and define its value in a subsequent code block.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern auth://{custom-key} [lineProps...] [filters...]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` custom-key</span></span>
<span class="line"><span>username: admin</span></span>
<span class="line"><span>password: my secret password</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="_3-referencing-a-value-from-the-values-panel" tabindex="-1">3. Referencing a Value from the Values Panel <a class="header-anchor" href="#_3-referencing-a-value-from-the-values-panel" aria-label="Permalink to &quot;3. Referencing a Value from the Values Panel&quot;">​</a></h3><p>Reference a value pre-defined in the <code>Values</code> panel.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern auth://{key-of-values} [lineProps...] [filters...]</span></span></code></pre></div><p><strong>Prerequisite:</strong> A key named <code>key-of-values</code> with an object containing <code>username</code> and <code>password</code> as its value must exist in <code>Values</code>.</p><h3 id="_4-loading-from-a-temporary-file" tabindex="-1">4. Loading from a Temporary File <a class="header-anchor" href="#_4-loading-from-a-temporary-file" aria-label="Permalink to &quot;4. Loading from a Temporary File&quot;">​</a></h3><p>Use Whistle&#39;s temporary file feature when content needs frequent editing.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pattern auth://temp.json</span></span></code></pre></div><p><strong>Steps:</strong></p><ol><li>In the Rules editor, hold down <code>Command</code> (Mac) / <code>Ctrl</code> (Windows)</li><li>Click with the mouse on <code>auth://temp.json</code></li><li>Enter the response content in the pop-up editing dialog</li><li>Click <code>Save</code> to save</li></ol><p>After saving, the rule will automatically change to a format similar to this:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/report auth://temp/11adb9c9e1142df67b30d7646ec59bcd34c855d9011d1a2405c7fc2dfc94568d.json</span></span></code></pre></div><p>To edit again, click the temporary file link in the same way.</p><h3 id="_5-loading-from-a-file-or-remote-url" tabindex="-1">5. Loading from a File or Remote URL <a class="header-anchor" href="#_5-loading-from-a-file-or-remote-url" aria-label="Permalink to &quot;5. Loading from a File or Remote URL&quot;">​</a></h3><p>Load a JSON or simple YAML file containing authentication information from a local file or remote URL.</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Load from a local file</span></span>
<span class="line"><span>pattern auth:///User/xxx/auth.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Load from a remote URL (supports http and https)</span></span>
<span class="line"><span>pattern auth://https://config.example.com/auth.json</span></span></code></pre></div><p><strong>File Format Requirements:</strong> The file content should be in JSON or simple YAML format, containing <code>username</code> and <code>password</code> fields:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;secret&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>or</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">admin</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">secret</span></span></code></pre></div><h2 id="parameter-details" tabindex="-1">Parameter Details <a class="header-anchor" href="#parameter-details" aria-label="Permalink to &quot;Parameter Details&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Required</th><th style="text-align:left;">Description &amp; Examples</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>pattern</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Expression used to match the request URL.<br>• Supports domains, paths, wildcards, regular expressions.<br>• See <a href="./pattern.html">Matching Pattern Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>value</strong></td><td style="text-align:left;">Yes</td><td style="text-align:left;">Authentication credentials, supporting multiple formats:<br>• <strong>Direct format</strong>: <code>username:password</code> or <code>username=test&amp;password=123</code><br>• <strong>Object format</strong>: An object containing <code>username</code> and <code>password</code> fields<br>• Supports loading from local files or remote URLs<br>• Supports inline, embedded, Values, local file path, remote URL references</td></tr><tr><td style="text-align:left;"><strong>lineProps</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Sets additional properties for the rule.<br>• Example: <code>lineProps://important</code> can increase this rule&#39;s priority.<br>• See <a href="./lineProps.html">lineProps Documentation</a> for details.</td></tr><tr><td style="text-align:left;"><strong>filters</strong></td><td style="text-align:left;">No</td><td style="text-align:left;">Optional filter conditions for precise control over when the rule takes effect.<br>• Can match request URL, method, headers, body content.<br>• Can match response status code, headers.<br>• See <a href="./filters.html">Filters Documentation</a> for details.</td></tr></tbody></table><h2 id="configuration-examples" tabindex="-1">Configuration Examples <a class="header-anchor" href="#configuration-examples" aria-label="Permalink to &quot;Configuration Examples&quot;">​</a></h2><h3 id="basic-example" tabindex="-1">Basic Example <a class="header-anchor" href="#basic-example" aria-label="Permalink to &quot;Basic Example&quot;">​</a></h3><p>Add Basic Authentication to the API endpoints of example.com:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://api.example.com/ auth://admin:secret</span></span></code></pre></div><h3 id="using-embedded-values" tabindex="-1">Using Embedded Values <a class="header-anchor" href="#using-embedded-values" aria-label="Permalink to &quot;Using Embedded Values&quot;">​</a></h3><p>Use the embedded method for more security when passwords contain special characters or spaces:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://internal.example.com/ auth://{prod-credentials}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` prod-credentials</span></span>
<span class="line"><span>username: service-account</span></span>
<span class="line"><span>password: P@ssw0rd!2024</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><h3 id="loading-from-a-file" tabindex="-1">Loading from a File <a class="header-anchor" href="#loading-from-a-file" aria-label="Permalink to &quot;Loading from a File&quot;">​</a></h3><p>Load authentication information from a local configuration file:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api/ auth:///Users/john/config/auth.json</span></span></code></pre></div><h3 id="using-with-filters" tabindex="-1">Using with Filters <a class="header-anchor" href="#using-with-filters" aria-label="Permalink to &quot;Using with Filters&quot;">​</a></h3><p>Add authentication only for POST requests:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api/ auth://admin:secret includeFilter://m:POST</span></span></code></pre></div><h3 id="referencing-configuration-from-values" tabindex="-1">Referencing Configuration from Values <a class="header-anchor" href="#referencing-configuration-from-values" aria-label="Permalink to &quot;Referencing Configuration from Values&quot;">​</a></h3><p>Assuming the <code>api-auth</code> configuration already exists in Values:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api/ auth://{api-auth}</span></span></code></pre></div><h2 id="how-it-works-related-protocols" tabindex="-1">How It Works &amp; Related Protocols <a class="header-anchor" href="#how-it-works-related-protocols" aria-label="Permalink to &quot;How It Works &amp; Related Protocols&quot;">​</a></h2><ol><li><p><strong>Core Principle</strong>: The <code>auth</code> protocol automatically calculates the Base64 encoding of the username and password and sets the <code>Authorization</code> request header.</p><p>The example above is equivalent to manually setting it using the <a href="./reqHeaders.html"><code>reqHeaders</code></a> protocol:</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://example.com/api/ reqHeaders://{auth.txt} # Content has spaces, cannot be inline</span></span>
<span class="line"><span></span></span>
<span class="line"><span>\`\`\` auth.txt</span></span>
<span class="line"><span>authorization: Basic YWRtaW46c2VjcmV0</span></span>
<span class="line"><span>\`\`\`</span></span></code></pre></div><p>Where <code>YWRtaW46c2VjcmV0</code> is the Base64 encoding of <code>admin:secret</code>.</p></li><li><p><strong>Advantage</strong>: Compared to directly using <code>reqHeaders</code>, the <code>auth</code> syntax is more concise and intuitive, requiring no manual calculation of the Base64 encoded value.</p></li></ol><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><ul><li>The <code>auth</code> protocol only supports HTTP Basic Authentication</li><li>For more complex authentication methods (such as Bearer Token, OAuth, etc.), please use the <a href="./reqHeaders.html"><code>reqHeaders</code></a> protocol to directly set the corresponding <code>Authorization</code> header</li><li>When loading from a remote URL, ensure the target URL is secure and reliable</li></ul>`,53)]))}const m=a(i,[["render",o]]);export{u as __pageData,m as default};
